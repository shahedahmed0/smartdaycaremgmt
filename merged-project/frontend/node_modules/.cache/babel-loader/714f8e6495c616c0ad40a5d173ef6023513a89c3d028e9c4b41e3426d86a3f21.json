{"ast":null,"code":"var _jsxFileName = \"/media/dh77b/New Volume/smartdaycare/merged-project/frontend/src/pages/AdminDashboard.js\",\n  _s = $RefreshSig$();\n// import React, { useEffect, useMemo, useState } from \"react\";\n// import {\n//   ArrowPathIcon,\n//   MagnifyingGlassIcon,\n//   UserPlusIcon,\n//   TrashIcon,\n// } from \"@heroicons/react/24/outline\";\n\n// import API from \"../utils/api\";\n// import { AuthContext } from \"../context/AuthContext\";\n\n// const STAFF_ROLES = [\n//   { value: \"caregiver\", label: \"Caregiver\" },\n//   { value: \"teacher\", label: \"Teacher\" },\n//   { value: \"cook\", label: \"Cook\" },\n// ];\n\n// const roleBadge = (staffRole) => {\n//   const v = String(staffRole || \"\").toLowerCase();\n//   if (v === \"teacher\") return \"bg-indigo-50 text-indigo-700 border-indigo-200\";\n//   if (v === \"cook\") return \"bg-amber-50 text-amber-700 border-amber-200\";\n//   return \"bg-emerald-50 text-emerald-700 border-emerald-200\"; // caregiver default\n// };\n\n// const fmtDate = (d) => (d ? new Date(d).toLocaleDateString() : \"-\");\n\n// export default function AdminDashboard() {\n//   const { user, logout } = React.useContext(AuthContext);\n\n//   const [staffList, setStaffList] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [creating, setCreating] = useState(false);\n//   const [status, setStatus] = useState(null); // {type, msg}\n\n//   const [query, setQuery] = useState(\"\");\n//   const [roleFilter, setRoleFilter] = useState(\"all\");\n\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     email: \"\",\n//     phone: \"\",\n//     staffRole: \"\",\n//     experience: \"\",\n//     joiningDate: \"\",\n//   });\n\n//   const fetchStaff = async () => {\n//     setLoading(true);\n//     setStatus(null);\n//     try {\n//       const res = await API.get(\"/users/staff\");\n//       setStaffList(res.data?.data || []);\n//       console.log(res.data);\n//     } catch (e) {\n//       console.error(e);\n//       setStatus({ type: \"error\", msg: \"Failed to load staff list.\" });\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   useEffect(() => {\n//     fetchStaff();\n//   }, []);\n\n//   const stats = useMemo(() => {\n//     const total = staffList.length;\n//     const caregiver = staffList.filter(\n//       (s) => s.staffRole === \"caregiver\"\n//     ).length;\n//     const teacher = staffList.filter((s) => s.staffRole === \"teacher\").length;\n//     const cook = staffList.filter((s) => s.staffRole === \"cook\").length;\n//     return { total, caregiver, teacher, cook };\n//   }, [staffList]);\n\n//   const filtered = useMemo(() => {\n//     const q = query.trim().toLowerCase();\n//     return staffList\n//       .filter((s) => {\n//         if (roleFilter !== \"all\" && s.staffRole !== roleFilter) return false;\n//         if (!q) return true;\n//         const hay = `${s.name || \"\"} ${s.email || \"\"} ${\n//           s.phone || \"\"\n//         }`.toLowerCase();\n//         return hay.includes(q);\n//       })\n//       .slice()\n//       .sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\n//   }, [staffList, query, roleFilter]);\n\n//   const handleCreateStaff = async (e) => {\n//     e.preventDefault();\n//     setStatus(null);\n//     setCreating(true);\n\n//     try {\n//       const payload = {\n//         name: form.name.trim(),\n//         email: form.email.trim(),\n//         phone: form.phone.trim(),\n//         staffRole: form.staffRole,\n//         experience:\n//           form.experience === \"\" ? undefined : Number(form.experience),\n//         joiningDate: form.joiningDate || undefined,\n//       };\n//       console.log(payload);\n\n//       const res = await API.post(\"/users/staff\", payload);\n//       const created = res.data?.data;\n//       const tempPassword = res.data?.tempPassword;\n\n//       setStaffList((prev) => [created, ...prev].filter(Boolean));\n//       setForm({\n//         name: \"\",\n//         email: \"\",\n//         phone: \"\",\n//         staffRole: \"caregiver\",\n//         experience: \"\",\n//         joiningDate: \"\",\n//       });\n\n//       setStatus({\n//         type: \"success\",\n//         msg: tempPassword\n//           ? `Staff created. Temporary password: ${tempPassword} (share this with staff to log in).`\n//           : \"Staff created successfully.\",\n//       });\n//     } catch (err) {\n//       console.error(err);\n//       setStatus({\n//         type: \"error\",\n//         msg: err.response?.data?.error || \"Failed to create staff.\",\n//       });\n//     } finally {\n//       setCreating(false);\n//     }\n//   };\n\n//   const deleteStaff = async (id) => {\n//     if (!window.confirm(\"Remove this staff member?\")) return;\n//     try {\n//       await API.delete(`/users/${id}`);\n//       setStaffList((prev) => prev.filter((s) => s._id !== id));\n//     } catch (err) {\n//       console.error(err);\n//       setStatus({ type: \"error\", msg: \"Failed to delete staff.\" });\n//     }\n//   };\n\n//   // Handle Admin Request for User\n//   const handleAdminRequest = async (id) => {\n//     try {\n//       const res = await API.post(`/users/request-admin/${id}`);\n//       alert(res.data?.message || \"Admin request submitted successfully.\");\n//     } catch (err) {\n//       alert(\"Failed to submit admin request.\");\n//     }\n//   };\n\n//   return (\n//     <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50\">\n//       {/* Top bar */}\n//       <div className=\"sticky top-0 z-10 border-b bg-white/80 backdrop-blur\">\n//         <div className=\"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between\">\n//           <div>\n//             <h1 className=\"text-2xl font-bold text-slate-900\">Admin Portal</h1>\n//             <p className=\"text-sm text-slate-600\">\n//               Staff management • roles • onboarding\n//             </p>\n//           </div>\n\n//           <div className=\"flex items-center gap-3\">\n//             <div className=\"hidden sm:block text-right\">\n//               <div className=\"text-sm font-semibold text-slate-900\">\n//                 {user?.name || \"Admin\"}\n//               </div>\n//               <div className=\"text-xs text-slate-500\">{user?.email}</div>\n//             </div>\n//             <button\n//               onClick={logout}\n//               className=\"px-4 py-2 rounded-xl bg-slate-900 text-white hover:bg-slate-800 transition\"\n//             >\n//               Logout\n//             </button>\n//           </div>\n//         </div>\n//       </div>\n\n//       <div className=\"max-w-7xl mx-auto px-4 py-8\">\n//         {/* Status */}\n//         {status?.type && (\n//           <div\n//             className={`mb-6 rounded-2xl border px-4 py-3 text-sm shadow-sm ${\n//               status.type === \"success\"\n//                 ? \"bg-emerald-50 text-emerald-800 border-emerald-200\"\n//                 : \"bg-rose-50 text-rose-800 border-rose-200\"\n//             }`}\n//           >\n//             {status.msg}\n//           </div>\n//         )}\n\n//         {/* Stats */}\n//         <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Total Staff</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.total}\n//             </div>\n//           </div>\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Caregivers</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.caregiver}\n//             </div>\n//           </div>\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Teachers</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.teacher}\n//             </div>\n//           </div>\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Cooks</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.cook}\n//             </div>\n//           </div>\n//         </div>\n\n//         <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n//           {/* Create staff */}\n//           <div className=\"lg:col-span-1\">\n//             <div className=\"rounded-2xl border bg-white shadow-sm overflow-hidden\">\n//               <div className=\"px-6 py-5 border-b flex items-center gap-3\">\n//                 <div className=\"p-2 rounded-xl bg-indigo-50 border border-indigo-100\">\n//                   <UserPlusIcon className=\"h-5 w-5 text-indigo-700\" />\n//                 </div>\n//                 <div>\n//                   <h2 className=\"font-semibold text-slate-900\">Add Staff</h2>\n//                   <p className=\"text-xs text-slate-500\">\n//                     Create a staff account with a sub-role\n//                   </p>\n//                 </div>\n//               </div>\n\n//               <form onSubmit={handleCreateStaff} className=\"p-6 space-y-4\">\n//                 <div>\n//                   <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                     Full Name\n//                   </label>\n//                   <input\n//                     value={form.name}\n//                     onChange={(e) => setForm({ ...form, name: e.target.value })}\n//                     required\n//                     className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     placeholder=\"e.g., Ayesha Rahman\"\n//                   />\n//                 </div>\n\n//                 <div>\n//                   <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                     Email\n//                   </label>\n//                   <input\n//                     type=\"email\"\n//                     value={form.email}\n//                     onChange={(e) =>\n//                       setForm({ ...form, email: e.target.value })\n//                     }\n//                     required\n//                     className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     placeholder=\"e.g., staff@daycare.com\"\n//                   />\n//                 </div>\n\n//                 <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Phone\n//                     </label>\n//                     <input\n//                       value={form.phone}\n//                       onChange={(e) =>\n//                         setForm({ ...form, phone: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                       placeholder=\"017XXXXXXXX\"\n//                     />\n//                   </div>\n\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Staff Role\n//                     </label>\n//                     <select\n//                       value={form.staffRole}\n//                       onChange={(e) =>\n//                         setForm({ ...form, staffRole: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     >\n//                       {STAFF_ROLES.map((r) => (\n//                         <option key={r.value} value={r.value}>\n//                           {r.label}\n//                         </option>\n//                       ))}\n//                     </select>\n//                   </div>\n//                 </div>\n\n//                 <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Experience (years)\n//                     </label>\n//                     <input\n//                       type=\"number\"\n//                       min=\"0\"\n//                       value={form.experience}\n//                       onChange={(e) =>\n//                         setForm({ ...form, experience: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                       placeholder=\"e.g., 3\"\n//                     />\n//                   </div>\n\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Joining Date\n//                     </label>\n//                     <input\n//                       type=\"date\"\n//                       value={form.joiningDate}\n//                       onChange={(e) =>\n//                         setForm({ ...form, joiningDate: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     />\n//                   </div>\n//                 </div>\n\n//                 <button\n//                   type=\"submit\"\n//                   disabled={creating}\n//                   className=\"w-full rounded-xl bg-indigo-600 text-white py-2.5 font-semibold hover:bg-indigo-700 disabled:opacity-60 transition\"\n//                 >\n//                   {creating ? \"Creating...\" : \"Create Staff\"}\n//                 </button>\n\n//                 <p className=\"text-xs text-slate-500\">\n//                   Tip: a temporary password is generated automatically. Share it\n//                   with the staff member so they can log in.\n//                 </p>\n//               </form>\n//             </div>\n//           </div>\n\n//           {/* Staff table */}\n//           <div className=\"lg:col-span-2\">\n//             <div className=\"rounded-2xl border bg-white shadow-sm overflow-hidden\">\n//               <div className=\"px-6 py-5 border-b flex flex-col sm:flex-row sm:items-center gap-4 sm:justify-between\">\n//                 <div>\n//                   <h2 className=\"font-semibold text-slate-900\">\n//                     Staff Directory\n//                   </h2>\n//                   <p className=\"text-xs text-slate-500\">\n//                     Search, filter, and manage staff accounts\n//                   </p>\n//                 </div>\n\n//                 <div className=\"flex items-center gap-3\">\n//                   <div className=\"relative\">\n//                     <MagnifyingGlassIcon className=\"h-5 w-5 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2\" />\n//                     <input\n//                       value={query}\n//                       onChange={(e) => setQuery(e.target.value)}\n//                       placeholder=\"Search name, email, phone\"\n//                       className=\"pl-10 pr-3 py-2.5 rounded-xl border w-72 max-w-full focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     />\n//                   </div>\n\n//                   <select\n//                     value={roleFilter}\n//                     onChange={(e) => setRoleFilter(e.target.value)}\n//                     className=\"py-2.5 rounded-xl border bg-white px-3 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                   >\n//                     <option value=\"all\">All roles</option>\n//                     {STAFF_ROLES.map((r) => (\n//                       <option key={r.value} value={r.value}>\n//                         {r.label}\n//                       </option>\n//                     ))}\n//                   </select>\n\n//                   <button\n//                     onClick={fetchStaff}\n//                     className=\"inline-flex items-center gap-2 px-3 py-2.5 rounded-xl border hover:bg-slate-50 transition\"\n//                     title=\"Refresh\"\n//                   >\n//                     <ArrowPathIcon className=\"h-5 w-5\" />\n//                     <span className=\"hidden sm:inline\">Refresh</span>\n//                   </button>\n//                 </div>\n//               </div>\n\n//               {loading ? (\n//                 <div className=\"py-10 text-center text-slate-500\">\n//                   Loading staff…\n//                 </div>\n//               ) : filtered.length === 0 ? (\n//                 <div className=\"py-10 text-center text-slate-500\">\n//                   No staff found. Try changing your search/filter.\n//                 </div>\n//               ) : (\n//                 <div className=\"overflow-x-auto\">\n//                   <table className=\"min-w-full text-sm\">\n//                     <thead>\n//                       <tr className=\"text-left bg-slate-50 border-b\">\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Staff\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Role\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Contact\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Experience\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Joining\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Added\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Actions\n//                         </th>\n//                       </tr>\n//                     </thead>\n\n//                     <tbody>\n//                       {filtered.map((s) => (\n//                         <tr\n//                           key={s._id}\n//                           className=\"border-b last:border-b-0 hover:bg-slate-50/60\"\n//                         >\n//                           <td className=\"py-3.5 px-4\">\n//                             <div className=\"font-semibold text-slate-900\">\n//                               {s.name}\n//                             </div>\n//                             <div className=\"text-xs text-slate-500\">\n//                               {s.email}\n//                             </div>\n//                           </td>\n//                           <td className=\"py-3.5 px-4\">\n//                             <span\n//                               className={`inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold ${roleBadge(\n//                                 s.staffRole\n//                               )}`}\n//                             >\n//                               {String(s.staffRole).toUpperCase()}\n//                             </span>\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {s.phone || \"-\"}\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {s.experience === 0 || s.experience\n//                               ? `${s.experience} yrs`\n//                               : \"-\"}\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {fmtDate(s.joiningDate)}\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {fmtDate(s.createdAt)}\n//                           </td>\n//                           <td className=\"py-3.5 px-4\">\n//                             {s.role === \"parent\" && (\n//                               <button\n//                                 onClick={() => handleAdminRequest(s._id)}\n//                                 className=\"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition\"\n//                               >\n//                                 Request Admin\n//                               </button>\n//                             )}\n//                             <button\n//                               onClick={() => deleteStaff(s._id)}\n//                               className=\"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-rose-600 text-white hover:bg-rose-700 transition\"\n//                               title=\"Delete\"\n//                             >\n//                               <TrashIcon className=\"h-4 w-4\" />\n//                               Delete\n//                             </button>\n//                           </td>\n//                         </tr>\n//                       ))}\n//                     </tbody>\n//                   </table>\n//                 </div>\n//               )}\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { ArrowPathIcon, MagnifyingGlassIcon, UserPlusIcon, TrashIcon } from \"@heroicons/react/24/outline\";\nimport API from \"../utils/api\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport '../styles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STAFF_ROLES = [{\n  value: \"caregiver\",\n  label: \"Caregiver\"\n}, {\n  value: \"teacher\",\n  label: \"Teacher\"\n}, {\n  value: \"cook\",\n  label: \"Cook\"\n}];\nconst roleBadge = staffRole => {\n  const v = String(staffRole || \"\").toLowerCase();\n  if (v === \"teacher\") return \"bg-indigo-50 text-indigo-700 border-indigo-200\";\n  if (v === \"cook\") return \"bg-amber-50 text-amber-700 border-amber-200\";\n  return \"bg-emerald-50 text-emerald-700 border-emerald-200\"; // caregiver default\n};\nconst fmtDate = d => d ? new Date(d).toLocaleDateString() : \"-\";\nexport default function AdminDashboard() {\n  _s();\n  const {\n    user,\n    logout\n  } = React.useContext(AuthContext);\n\n  // Staff state\n  const [staffList, setStaffList] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [creating, setCreating] = useState(false);\n  const [status, setStatus] = useState(null); // {type, msg}\n  const [query, setQuery] = useState(\"\");\n  const [roleFilter, setRoleFilter] = useState(\"all\");\n  const [form, setForm] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    staffRole: \"caregiver\",\n    experience: \"\",\n    joiningDate: \"\"\n  });\n\n  // Children state\n  const [children, setChildren] = useState([]);\n  const [childrenLoading, setChildrenLoading] = useState(true);\n  const [assigningId, setAssigningId] = useState(null); // childId while assigning\n\n  // Staff Activities state\n  const [staffActivities, setStaffActivities] = useState([]);\n  const [activitiesLoading, setActivitiesLoading] = useState(true);\n\n  // Fetch staff activities\n  const fetchStaffActivities = async () => {\n    setActivitiesLoading(true);\n    try {\n      const res = await API.get(\"/admin/staff-record\");\n      // Sort by latest first\n      const sorted = (res.data.data || []).sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n      setStaffActivities(sorted);\n    } catch (err) {\n      console.error(\"Failed to fetch staff activities:\", err);\n      setStatus({\n        type: \"error\",\n        msg: \"Failed to load staff activity records.\"\n      });\n      setStaffActivities([]);\n    } finally {\n      setActivitiesLoading(false);\n    }\n  };\n\n  // Fetch on mount (add to existing useEffect)\n\n  // Fetch staff\n  const fetchStaff = async () => {\n    setLoading(true);\n    setStatus(null);\n    try {\n      var _res$data;\n      const res = await API.get(\"/users/staff\");\n      setStaffList(((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.data) || []);\n    } catch (e) {\n      console.error(e);\n      setStatus({\n        type: \"error\",\n        msg: \"Failed to load staff list.\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fetch children\n  const fetchChildren = async () => {\n    setChildrenLoading(true);\n    try {\n      const res = await API.get(\"/admin/getallchildren\");\n      setChildren(res.data || []);\n    } catch (err) {\n      console.error(err);\n      setStatus({\n        type: \"error\",\n        msg: \"Failed to load children.\"\n      });\n    } finally {\n      setChildrenLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchStaff();\n    fetchChildren();\n    fetchStaffActivities();\n  }, []);\n\n  // Staff stats\n  const stats = useMemo(() => {\n    const total = staffList.length;\n    const caregiver = staffList.filter(s => s.staffRole === \"caregiver\").length;\n    const teacher = staffList.filter(s => s.staffRole === \"teacher\").length;\n    const cook = staffList.filter(s => s.staffRole === \"cook\").length;\n    return {\n      total,\n      caregiver,\n      teacher,\n      cook\n    };\n  }, [staffList]);\n\n  // Filtered staff\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    return staffList.filter(s => {\n      if (roleFilter !== \"all\" && s.staffRole !== roleFilter) return false;\n      if (!q) return true;\n      const hay = `${s.name || \"\"} ${s.email || \"\"} ${s.phone || \"\"}`.toLowerCase();\n      return hay.includes(q);\n    }).slice().sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\n  }, [staffList, query, roleFilter]);\n\n  // List of caregivers only (for dropdown)\n  const caregivers = useMemo(() => {\n    return staffList.filter(s => s.staffRole === \"caregiver\").sort((a, b) => a.name.localeCompare(b.name));\n  }, [staffList]);\n\n  // Create staff\n  const handleCreateStaff = async e => {\n    e.preventDefault();\n    setStatus(null);\n    setCreating(true);\n    try {\n      var _res$data2, _res$data3;\n      const payload = {\n        name: form.name.trim(),\n        email: form.email.trim(),\n        phone: form.phone.trim(),\n        staffRole: form.staffRole,\n        experience: form.experience === \"\" ? undefined : Number(form.experience),\n        joiningDate: form.joiningDate || undefined\n      };\n      const res = await API.post(\"/users/staff\", payload);\n      const created = (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.data;\n      const tempPassword = (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.tempPassword;\n      setStaffList(prev => [created, ...prev].filter(Boolean));\n      setForm({\n        name: \"\",\n        email: \"\",\n        phone: \"\",\n        staffRole: \"caregiver\",\n        experience: \"\",\n        joiningDate: \"\"\n      });\n      setStatus({\n        type: \"success\",\n        msg: tempPassword ? `Staff created. Temporary password: ${tempPassword}` : \"Staff created successfully.\"\n      });\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      setStatus({\n        type: \"error\",\n        msg: ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || \"Failed to create staff.\"\n      });\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  // Delete staff\n  const deleteStaff = async id => {\n    if (!window.confirm(\"Remove this staff member?\")) return;\n    try {\n      await API.delete(`/users/${id}`);\n      setStaffList(prev => prev.filter(s => s._id !== id));\n      setStatus({\n        type: \"success\",\n        msg: \"Staff deleted.\"\n      });\n    } catch (err) {\n      console.error(err);\n      setStatus({\n        type: \"error\",\n        msg: \"Failed to delete staff.\"\n      });\n    }\n  };\n\n  // Assign caregiver\n  const handleAssignCaregiver = async (childId, caregiverId) => {\n    // Allow empty string to unassign\n    setAssigningId(childId);\n    try {\n      await API.post(\"/admin/assign-caregiver\", {\n        childId,\n        caregiverId: caregiverId || null // backend should handle null/empty as unassign if needed\n      });\n      setChildren(prev => prev.map(c => c._id === childId ? {\n        ...c,\n        caregiver: caregiverId || null\n      } : c));\n      setStatus({\n        type: \"success\",\n        msg: \"Caregiver assigned successfully!\"\n      });\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error(err);\n      setStatus({\n        type: \"error\",\n        msg: ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || \"Failed to assign caregiver.\"\n      });\n    } finally {\n      setAssigningId(null);\n    }\n  };\n  const handleUpdateCaregiver = async (childId, caregiverId) => {\n    setAssigningId(childId);\n    try {\n      await API.put(`/admin/assign-caregiver/${childId}`, {\n        caregiverId: caregiverId || null\n      });\n\n      // Update local state\n      setChildren(prev => prev.map(c => c._id === childId ? {\n        ...c,\n        caregiver: caregiverId\n      } : c));\n      setStatus({\n        type: \"success\",\n        msg: caregiverId ? \"Caregiver assigned successfully!\" : \"Caregiver removed successfully!\"\n      });\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      console.error(err);\n      setStatus({\n        type: \"error\",\n        msg: ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || \"Failed to update caregiver.\"\n      });\n    } finally {\n      setAssigningId(null);\n    }\n  };\n\n  // Helper to get caregiver name\n  const getCaregiverName = caregiverId => {\n    if (!caregiverId) return \"None\";\n    const cg = staffList.find(s => s._id === caregiverId);\n    return cg ? cg.name : \"Unknown\";\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    style: {\n      background: 'linear-gradient(135deg, #f5cfcf 0%, #dbbfbf 100%)',\n      minHeight: '100vh',\n      padding: '0'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"header\",\n      style: {\n        marginBottom: '0',\n        borderRadius: '0',\n        position: 'sticky',\n        top: 0,\n        zIndex: 10\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          flexWrap: 'wrap',\n          gap: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"gwendolyn-bold\",\n            style: {\n              fontSize: '2rem',\n              marginBottom: '5px'\n            },\n            children: \"\\uD83C\\uDFE1 SmartDaycare - Admin Portal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 794,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '1rem',\n              marginBottom: '0'\n            },\n            children: \"Staff management \\u2022 children \\u2022 caregiver assignment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 795,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 793,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '15px',\n            flexWrap: 'wrap'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'right'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: '600',\n                fontSize: '0.95rem'\n              },\n              children: (user === null || user === void 0 ? void 0 : user.name) || \"Admin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 801,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.85rem',\n                opacity: 0.8\n              },\n              children: user === null || user === void 0 ? void 0 : user.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 804,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 800,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: logout,\n            className: \"nav-btn\",\n            style: {\n              background: '#ef4444'\n            },\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 806,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 799,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 792,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 791,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-container\",\n      style: {\n        maxWidth: '1400px',\n        margin: '0 auto',\n        padding: '20px'\n      },\n      children: [(status === null || status === void 0 ? void 0 : status.type) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-container\",\n        style: {\n          marginBottom: '20px',\n          background: status.type === \"success\" ? '#d1fae5' : '#fee2e2',\n          border: `2px solid ${status.type === \"success\" ? '#10b981' : '#ef4444'}`,\n          padding: '15px 20px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: status.type === \"success\" ? '#065f46' : '#991b1b',\n            fontWeight: '600',\n            margin: 0\n          },\n          children: status.msg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 829,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 820,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"summary-grid\",\n        style: {\n          marginBottom: '30px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-value\",\n            children: stats.total\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 842,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-label\",\n            children: \"Total Staff\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 843,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 841,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-value\",\n            children: stats.caregiver\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 846,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-label\",\n            children: \"Caregivers\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 847,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 845,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-value\",\n            children: stats.teacher\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 850,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-label\",\n            children: \"Teachers\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 851,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 849,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-value\",\n            children: stats.cook\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 854,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-label\",\n            children: \"Cooks\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 855,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 853,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 840,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\n          gap: '30px',\n          marginBottom: '30px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u2795 Add Staff\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 864,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginBottom: '20px',\n                color: '#6b7280',\n                fontSize: '0.9rem'\n              },\n              children: \"Create a staff account with a sub-role\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 865,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleCreateStaff,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-xs font-semibold text-slate-700 mb-1\",\n                  children: \"Full Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 870,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: form.name,\n                  onChange: e => setForm({\n                    ...form,\n                    name: e.target.value\n                  }),\n                  required: true,\n                  className: \"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\",\n                  placeholder: \"e.g., Ayesha Rahman\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 873,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 869,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-xs font-semibold text-slate-700 mb-1\",\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 882,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"email\",\n                  value: form.email,\n                  onChange: e => setForm({\n                    ...form,\n                    email: e.target.value\n                  }),\n                  required: true,\n                  className: \"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\",\n                  placeholder: \"e.g., staff@daycare.com\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 885,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 881,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 sm:grid-cols-2 gap-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-xs font-semibold text-slate-700 mb-1\",\n                    children: \"Phone\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 898,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: form.phone,\n                    onChange: e => setForm({\n                      ...form,\n                      phone: e.target.value\n                    }),\n                    className: \"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\",\n                    placeholder: \"017XXXXXXXX\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 901,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 897,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-xs font-semibold text-slate-700 mb-1\",\n                    children: \"Staff Role\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 911,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: form.staffRole,\n                    onChange: e => setForm({\n                      ...form,\n                      staffRole: e.target.value\n                    }),\n                    className: \"w-full rounded-xl border px-3 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200\",\n                    children: STAFF_ROLES.map(r => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: r.value,\n                      children: r.label\n                    }, r.value, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 922,\n                      columnNumber: 25\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 914,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 910,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 896,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 sm:grid-cols-2 gap-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-xs font-semibold text-slate-700 mb-1\",\n                    children: \"Experience (years)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 931,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    min: \"0\",\n                    value: form.experience,\n                    onChange: e => setForm({\n                      ...form,\n                      experience: e.target.value\n                    }),\n                    className: \"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\",\n                    placeholder: \"e.g., 3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 934,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 930,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-xs font-semibold text-slate-700 mb-1\",\n                    children: \"Joining Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 946,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"date\",\n                    value: form.joiningDate,\n                    onChange: e => setForm({\n                      ...form,\n                      joiningDate: e.target.value\n                    }),\n                    className: \"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 949,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 945,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 929,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                disabled: creating,\n                className: \"w-full rounded-xl bg-indigo-600 text-white py-2.5 font-semibold hover:bg-indigo-700 disabled:opacity-60 transition\",\n                children: creating ? \"Creating...\" : \"Create Staff\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 959,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-slate-500\",\n                children: \"A temporary password will be generated and shown after creation.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 966,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 868,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 863,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 862,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rounded-2xl border bg-white shadow-sm overflow-hidden\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"px-6 py-5 border-b flex flex-col sm:flex-row sm:items-center gap-4 sm:justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"font-semibold text-slate-900\",\n                  children: \"Staff Directory\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 979,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-slate-500\",\n                  children: \"Search, filter, and manage staff accounts\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 982,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 978,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"relative\",\n                  children: [/*#__PURE__*/_jsxDEV(MagnifyingGlassIcon, {\n                    className: \"h-5 w-5 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 988,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: query,\n                    onChange: e => setQuery(e.target.value),\n                    placeholder: \"Search name, email, phone\",\n                    className: \"pl-10 pr-3 py-2.5 rounded-xl border w-72 max-w-full focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 989,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 987,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: roleFilter,\n                  onChange: e => setRoleFilter(e.target.value),\n                  className: \"py-2.5 rounded-xl border bg-white px-3 focus:outline-none focus:ring-2 focus:ring-indigo-200\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"all\",\n                    children: \"All roles\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1001,\n                    columnNumber: 21\n                  }, this), STAFF_ROLES.map(r => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: r.value,\n                    children: r.label\n                  }, r.value, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1003,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 996,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: fetchStaff,\n                  className: \"inline-flex items-center gap-2 px-3 py-2.5 rounded-xl border hover:bg-slate-50 transition\",\n                  title: \"Refresh\",\n                  children: [/*#__PURE__*/_jsxDEV(ArrowPathIcon, {\n                    className: \"h-5 w-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1013,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"hidden sm:inline\",\n                    children: \"Refresh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1014,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1008,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 986,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 977,\n              columnNumber: 15\n            }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-10 text-center text-slate-500\",\n              children: \"Loading staff\\u2026\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1020,\n              columnNumber: 17\n            }, this) : filtered.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-10 text-center text-slate-500\",\n              children: \"No staff found.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1024,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overflow-x-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"min-w-full text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"text-left bg-slate-50 border-b\",\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                      children: \"Staff\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1032,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                      children: \"Role\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1035,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                      children: \"Contact\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1038,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                      children: \"Experience\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1041,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                      children: \"Joining\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1044,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                      children: \"Added\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1047,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                      children: \"Actions\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1050,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1031,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1030,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: filtered.map(s => /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"border-b last:border-b-0 hover:bg-slate-50/60\",\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3.5 px-4\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"font-semibold text-slate-900\",\n                        children: s.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1062,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-slate-500\",\n                        children: s.email\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1065,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1061,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3.5 px-4\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: `inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold ${roleBadge(s.staffRole)}`,\n                        children: String(s.staffRole).toUpperCase()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1070,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1069,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3.5 px-4 text-slate-700\",\n                      children: s.phone || \"-\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1078,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3.5 px-4 text-slate-700\",\n                      children: s.experience !== undefined ? `${s.experience} yrs` : \"-\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1081,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3.5 px-4 text-slate-700\",\n                      children: fmtDate(s.joiningDate)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1086,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3.5 px-4 text-slate-700\",\n                      children: fmtDate(s.createdAt)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1089,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3.5 px-4\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => deleteStaff(s._id),\n                        className: \"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-rose-600 text-white hover:bg-rose-700 transition text-sm\",\n                        children: [/*#__PURE__*/_jsxDEV(TrashIcon, {\n                          className: \"h-4 w-4\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1097,\n                          columnNumber: 31\n                        }, this), \"Delete\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1093,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1092,\n                      columnNumber: 27\n                    }, this)]\n                  }, s._id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1057,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1055,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1029,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1028,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 976,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 975,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 860,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rounded-2xl border bg-white shadow-sm overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-6 py-5 border-b flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-2 rounded-xl bg-emerald-50 border border-emerald-100\",\n              children: /*#__PURE__*/_jsxDEV(UserPlusIcon, {\n                className: \"h-5 w-5 text-emerald-700\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1117,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1116,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"font-semibold text-slate-900\",\n                children: \"Children & Caregiver Management\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1120,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-slate-500\",\n                children: \"Assign, update, or remove caregivers for each child\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1123,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1119,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: fetchChildren,\n            className: \"inline-flex items-center gap-2 px-3 py-2.5 rounded-xl border hover:bg-slate-50 transition\",\n            children: [/*#__PURE__*/_jsxDEV(ArrowPathIcon, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1132,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"hidden sm:inline\",\n              children: \"Refresh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1133,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1128,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1114,\n          columnNumber: 11\n        }, this), childrenLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-10 text-center text-slate-500\",\n          children: \"Loading children\\u2026\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1138,\n          columnNumber: 13\n        }, this) : children.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-10 text-center text-slate-500\",\n          children: \"No children registered yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1142,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"text-left bg-slate-50 border-b\",\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                  children: \"Child\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1150,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                  children: \"Date of Birth\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1153,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                  children: \"Parent\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1156,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                  children: \"Current Caregiver\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1159,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                  children: \"Actions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1162,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1149,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1148,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: children.map(child => {\n                var _child$parent;\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"border-b last:border-b-0 hover:bg-slate-50/60\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-3.5 px-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-semibold text-slate-900\",\n                      children: child.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1174,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs text-slate-500\",\n                      children: [\"ID: \", child._id]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1177,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1173,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-3.5 px-4 text-slate-700\",\n                    children: child.dateOfBirth ? new Date(child.dateOfBirth).toLocaleDateString() : \"-\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1181,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-3.5 px-4 text-slate-700\",\n                    children: ((_child$parent = child.parent) === null || _child$parent === void 0 ? void 0 : _child$parent.name) || \"-\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1186,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-3.5 px-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold ${child.caregiver ? \"bg-emerald-50 text-emerald-700 border-emerald-200\" : \"bg-gray-100 text-gray-600 border-gray-300\"}`,\n                      children: getCaregiverName(child.caregiver)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1190,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1189,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-3.5 px-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center gap-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                        value: child.caregiver || \"\",\n                        disabled: assigningId === child._id,\n                        onChange: e => {\n                          const newCaregiverId = e.target.value || null;\n                          handleUpdateCaregiver(child._id, newCaregiverId);\n                        },\n                        className: \"rounded-xl border px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200\",\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"\",\n                          children: \"\\u2014 No caregiver \\u2014\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1212,\n                          columnNumber: 29\n                        }, this), caregivers.map(cg => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: cg._id,\n                          children: [cg.name, \" (\", cg.email, \")\"]\n                        }, cg._id, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1214,\n                          columnNumber: 31\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1203,\n                        columnNumber: 27\n                      }, this), child.caregiver && /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => handleUpdateCaregiver(child._id, null),\n                        disabled: assigningId === child._id,\n                        className: \"px-3 py-2 rounded-xl bg-rose-600 text-white text-sm hover:bg-rose-700 disabled:opacity-60 transition flex items-center gap-1.5\",\n                        children: [/*#__PURE__*/_jsxDEV(TrashIcon, {\n                          className: \"h-4 w-4\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1229,\n                          columnNumber: 31\n                        }, this), \"Remove\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1222,\n                        columnNumber: 29\n                      }, this), assigningId === child._id && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-xs text-slate-500\",\n                        children: \"saving\\u2026\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1235,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1201,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1200,\n                    columnNumber: 23\n                  }, this)]\n                }, child._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1169,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1167,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1147,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1146,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rounded-2xl border bg-white shadow-sm overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-6 py-5 border-b flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-2 rounded-xl bg-amber-50 border border-amber-100\",\n              children: /*#__PURE__*/_jsxDEV(ArrowPathIcon, {\n                className: \"h-5 w-5 text-amber-700\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1254,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1253,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"font-semibold text-slate-900\",\n                children: \"Staff Activity Log\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1257,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-slate-500\",\n                children: \"All recorded activities from caregivers, teachers, and cooks\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1260,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1256,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: fetchStaffActivities,\n            disabled: activitiesLoading,\n            className: \"inline-flex items-center gap-2 px-3 py-2.5 rounded-xl border hover:bg-slate-50 transition disabled:opacity-60\",\n            children: [/*#__PURE__*/_jsxDEV(ArrowPathIcon, {\n              className: `h-5 w-5 ${activitiesLoading ? \"animate-spin\" : \"\"}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1270,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"hidden sm:inline\",\n              children: \"Refresh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1273,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1251,\n          columnNumber: 11\n        }, this), activitiesLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-10 text-center text-slate-500\",\n          children: \"Loading activities\\u2026\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1278,\n          columnNumber: 13\n        }, this) : staffActivities.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-10 text-center text-slate-500\",\n          children: \"No staff activities recorded yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1282,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"text-left bg-slate-50 border-b\",\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                  children: \"Staff Member\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1290,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                  children: \"Role\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1293,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                  children: \"Activity\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1296,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-3.5 px-4 font-semibold text-slate-700\",\n                  children: \"Timestamp\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1299,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1289,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1288,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: staffActivities.map(activity => {\n                var _staff$staffRole;\n                const staff = staffList.find(s => s._id === activity.staffId);\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"border-b last:border-b-0 hover:bg-slate-50/60\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-3.5 px-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-medium text-slate-900\",\n                      children: (staff === null || staff === void 0 ? void 0 : staff.name) || \"Unknown Staff\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1315,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs text-slate-500\",\n                      children: (staff === null || staff === void 0 ? void 0 : staff.email) || \"-\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1318,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1314,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-3.5 px-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold ${roleBadge(staff === null || staff === void 0 ? void 0 : staff.staffRole)}`,\n                      children: (staff === null || staff === void 0 ? void 0 : (_staff$staffRole = staff.staffRole) === null || _staff$staffRole === void 0 ? void 0 : _staff$staffRole.toUpperCase()) || \"N/A\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1323,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1322,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-3.5 px-4 text-slate-700 font-medium\",\n                    children: activity.activityname\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1331,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-3.5 px-4 text-slate-700\",\n                    children: new Date(activity.createdAt).toLocaleString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1334,\n                    columnNumber: 25\n                  }, this)]\n                }, activity._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1310,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1304,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1287,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1286,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1250,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 817,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 789,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminDashboard, \"Mw4sCQ8Runnzie5AO7kvWGgyfRs=\");\n_c = AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","ArrowPathIcon","MagnifyingGlassIcon","UserPlusIcon","TrashIcon","API","AuthContext","jsxDEV","_jsxDEV","STAFF_ROLES","value","label","roleBadge","staffRole","v","String","toLowerCase","fmtDate","d","Date","toLocaleDateString","AdminDashboard","_s","user","logout","useContext","staffList","setStaffList","loading","setLoading","creating","setCreating","status","setStatus","query","setQuery","roleFilter","setRoleFilter","form","setForm","name","email","phone","experience","joiningDate","children","setChildren","childrenLoading","setChildrenLoading","assigningId","setAssigningId","staffActivities","setStaffActivities","activitiesLoading","setActivitiesLoading","fetchStaffActivities","res","get","sorted","data","sort","a","b","createdAt","err","console","error","type","msg","fetchStaff","_res$data","e","fetchChildren","stats","total","length","caregiver","filter","s","teacher","cook","filtered","q","trim","hay","includes","slice","caregivers","localeCompare","handleCreateStaff","preventDefault","_res$data2","_res$data3","payload","undefined","Number","post","created","tempPassword","prev","Boolean","_err$response","_err$response$data","response","deleteStaff","id","window","confirm","delete","_id","handleAssignCaregiver","childId","caregiverId","map","c","_err$response2","_err$response2$data","handleUpdateCaregiver","put","_err$response3","_err$response3$data","getCaregiverName","cg","find","className","style","background","minHeight","padding","marginBottom","borderRadius","position","top","zIndex","display","justifyContent","alignItems","flexWrap","gap","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","textAlign","fontWeight","opacity","onClick","maxWidth","margin","border","color","gridTemplateColumns","onSubmit","onChange","target","required","placeholder","r","min","disabled","title","toUpperCase","child","_child$parent","dateOfBirth","parent","newCaregiverId","activity","_staff$staffRole","staff","staffId","activityname","toLocaleString","_c","$RefreshReg$"],"sources":["/media/dh77b/New Volume/smartdaycare/merged-project/frontend/src/pages/AdminDashboard.js"],"sourcesContent":["// import React, { useEffect, useMemo, useState } from \"react\";\n// import {\n//   ArrowPathIcon,\n//   MagnifyingGlassIcon,\n//   UserPlusIcon,\n//   TrashIcon,\n// } from \"@heroicons/react/24/outline\";\n\n// import API from \"../utils/api\";\n// import { AuthContext } from \"../context/AuthContext\";\n\n// const STAFF_ROLES = [\n//   { value: \"caregiver\", label: \"Caregiver\" },\n//   { value: \"teacher\", label: \"Teacher\" },\n//   { value: \"cook\", label: \"Cook\" },\n// ];\n\n// const roleBadge = (staffRole) => {\n//   const v = String(staffRole || \"\").toLowerCase();\n//   if (v === \"teacher\") return \"bg-indigo-50 text-indigo-700 border-indigo-200\";\n//   if (v === \"cook\") return \"bg-amber-50 text-amber-700 border-amber-200\";\n//   return \"bg-emerald-50 text-emerald-700 border-emerald-200\"; // caregiver default\n// };\n\n// const fmtDate = (d) => (d ? new Date(d).toLocaleDateString() : \"-\");\n\n// export default function AdminDashboard() {\n//   const { user, logout } = React.useContext(AuthContext);\n\n//   const [staffList, setStaffList] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [creating, setCreating] = useState(false);\n//   const [status, setStatus] = useState(null); // {type, msg}\n\n//   const [query, setQuery] = useState(\"\");\n//   const [roleFilter, setRoleFilter] = useState(\"all\");\n\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     email: \"\",\n//     phone: \"\",\n//     staffRole: \"\",\n//     experience: \"\",\n//     joiningDate: \"\",\n//   });\n\n//   const fetchStaff = async () => {\n//     setLoading(true);\n//     setStatus(null);\n//     try {\n//       const res = await API.get(\"/users/staff\");\n//       setStaffList(res.data?.data || []);\n//       console.log(res.data);\n//     } catch (e) {\n//       console.error(e);\n//       setStatus({ type: \"error\", msg: \"Failed to load staff list.\" });\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   useEffect(() => {\n//     fetchStaff();\n//   }, []);\n\n//   const stats = useMemo(() => {\n//     const total = staffList.length;\n//     const caregiver = staffList.filter(\n//       (s) => s.staffRole === \"caregiver\"\n//     ).length;\n//     const teacher = staffList.filter((s) => s.staffRole === \"teacher\").length;\n//     const cook = staffList.filter((s) => s.staffRole === \"cook\").length;\n//     return { total, caregiver, teacher, cook };\n//   }, [staffList]);\n\n//   const filtered = useMemo(() => {\n//     const q = query.trim().toLowerCase();\n//     return staffList\n//       .filter((s) => {\n//         if (roleFilter !== \"all\" && s.staffRole !== roleFilter) return false;\n//         if (!q) return true;\n//         const hay = `${s.name || \"\"} ${s.email || \"\"} ${\n//           s.phone || \"\"\n//         }`.toLowerCase();\n//         return hay.includes(q);\n//       })\n//       .slice()\n//       .sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\n//   }, [staffList, query, roleFilter]);\n\n//   const handleCreateStaff = async (e) => {\n//     e.preventDefault();\n//     setStatus(null);\n//     setCreating(true);\n\n//     try {\n//       const payload = {\n//         name: form.name.trim(),\n//         email: form.email.trim(),\n//         phone: form.phone.trim(),\n//         staffRole: form.staffRole,\n//         experience:\n//           form.experience === \"\" ? undefined : Number(form.experience),\n//         joiningDate: form.joiningDate || undefined,\n//       };\n//       console.log(payload);\n\n//       const res = await API.post(\"/users/staff\", payload);\n//       const created = res.data?.data;\n//       const tempPassword = res.data?.tempPassword;\n\n//       setStaffList((prev) => [created, ...prev].filter(Boolean));\n//       setForm({\n//         name: \"\",\n//         email: \"\",\n//         phone: \"\",\n//         staffRole: \"caregiver\",\n//         experience: \"\",\n//         joiningDate: \"\",\n//       });\n\n//       setStatus({\n//         type: \"success\",\n//         msg: tempPassword\n//           ? `Staff created. Temporary password: ${tempPassword} (share this with staff to log in).`\n//           : \"Staff created successfully.\",\n//       });\n//     } catch (err) {\n//       console.error(err);\n//       setStatus({\n//         type: \"error\",\n//         msg: err.response?.data?.error || \"Failed to create staff.\",\n//       });\n//     } finally {\n//       setCreating(false);\n//     }\n//   };\n\n//   const deleteStaff = async (id) => {\n//     if (!window.confirm(\"Remove this staff member?\")) return;\n//     try {\n//       await API.delete(`/users/${id}`);\n//       setStaffList((prev) => prev.filter((s) => s._id !== id));\n//     } catch (err) {\n//       console.error(err);\n//       setStatus({ type: \"error\", msg: \"Failed to delete staff.\" });\n//     }\n//   };\n\n//   // Handle Admin Request for User\n//   const handleAdminRequest = async (id) => {\n//     try {\n//       const res = await API.post(`/users/request-admin/${id}`);\n//       alert(res.data?.message || \"Admin request submitted successfully.\");\n//     } catch (err) {\n//       alert(\"Failed to submit admin request.\");\n//     }\n//   };\n\n//   return (\n//     <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50\">\n//       {/* Top bar */}\n//       <div className=\"sticky top-0 z-10 border-b bg-white/80 backdrop-blur\">\n//         <div className=\"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between\">\n//           <div>\n//             <h1 className=\"text-2xl font-bold text-slate-900\">Admin Portal</h1>\n//             <p className=\"text-sm text-slate-600\">\n//               Staff management • roles • onboarding\n//             </p>\n//           </div>\n\n//           <div className=\"flex items-center gap-3\">\n//             <div className=\"hidden sm:block text-right\">\n//               <div className=\"text-sm font-semibold text-slate-900\">\n//                 {user?.name || \"Admin\"}\n//               </div>\n//               <div className=\"text-xs text-slate-500\">{user?.email}</div>\n//             </div>\n//             <button\n//               onClick={logout}\n//               className=\"px-4 py-2 rounded-xl bg-slate-900 text-white hover:bg-slate-800 transition\"\n//             >\n//               Logout\n//             </button>\n//           </div>\n//         </div>\n//       </div>\n\n//       <div className=\"max-w-7xl mx-auto px-4 py-8\">\n//         {/* Status */}\n//         {status?.type && (\n//           <div\n//             className={`mb-6 rounded-2xl border px-4 py-3 text-sm shadow-sm ${\n//               status.type === \"success\"\n//                 ? \"bg-emerald-50 text-emerald-800 border-emerald-200\"\n//                 : \"bg-rose-50 text-rose-800 border-rose-200\"\n//             }`}\n//           >\n//             {status.msg}\n//           </div>\n//         )}\n\n//         {/* Stats */}\n//         <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Total Staff</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.total}\n//             </div>\n//           </div>\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Caregivers</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.caregiver}\n//             </div>\n//           </div>\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Teachers</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.teacher}\n//             </div>\n//           </div>\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Cooks</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.cook}\n//             </div>\n//           </div>\n//         </div>\n\n//         <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n//           {/* Create staff */}\n//           <div className=\"lg:col-span-1\">\n//             <div className=\"rounded-2xl border bg-white shadow-sm overflow-hidden\">\n//               <div className=\"px-6 py-5 border-b flex items-center gap-3\">\n//                 <div className=\"p-2 rounded-xl bg-indigo-50 border border-indigo-100\">\n//                   <UserPlusIcon className=\"h-5 w-5 text-indigo-700\" />\n//                 </div>\n//                 <div>\n//                   <h2 className=\"font-semibold text-slate-900\">Add Staff</h2>\n//                   <p className=\"text-xs text-slate-500\">\n//                     Create a staff account with a sub-role\n//                   </p>\n//                 </div>\n//               </div>\n\n//               <form onSubmit={handleCreateStaff} className=\"p-6 space-y-4\">\n//                 <div>\n//                   <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                     Full Name\n//                   </label>\n//                   <input\n//                     value={form.name}\n//                     onChange={(e) => setForm({ ...form, name: e.target.value })}\n//                     required\n//                     className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     placeholder=\"e.g., Ayesha Rahman\"\n//                   />\n//                 </div>\n\n//                 <div>\n//                   <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                     Email\n//                   </label>\n//                   <input\n//                     type=\"email\"\n//                     value={form.email}\n//                     onChange={(e) =>\n//                       setForm({ ...form, email: e.target.value })\n//                     }\n//                     required\n//                     className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     placeholder=\"e.g., staff@daycare.com\"\n//                   />\n//                 </div>\n\n//                 <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Phone\n//                     </label>\n//                     <input\n//                       value={form.phone}\n//                       onChange={(e) =>\n//                         setForm({ ...form, phone: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                       placeholder=\"017XXXXXXXX\"\n//                     />\n//                   </div>\n\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Staff Role\n//                     </label>\n//                     <select\n//                       value={form.staffRole}\n//                       onChange={(e) =>\n//                         setForm({ ...form, staffRole: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     >\n//                       {STAFF_ROLES.map((r) => (\n//                         <option key={r.value} value={r.value}>\n//                           {r.label}\n//                         </option>\n//                       ))}\n//                     </select>\n//                   </div>\n//                 </div>\n\n//                 <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Experience (years)\n//                     </label>\n//                     <input\n//                       type=\"number\"\n//                       min=\"0\"\n//                       value={form.experience}\n//                       onChange={(e) =>\n//                         setForm({ ...form, experience: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                       placeholder=\"e.g., 3\"\n//                     />\n//                   </div>\n\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Joining Date\n//                     </label>\n//                     <input\n//                       type=\"date\"\n//                       value={form.joiningDate}\n//                       onChange={(e) =>\n//                         setForm({ ...form, joiningDate: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     />\n//                   </div>\n//                 </div>\n\n//                 <button\n//                   type=\"submit\"\n//                   disabled={creating}\n//                   className=\"w-full rounded-xl bg-indigo-600 text-white py-2.5 font-semibold hover:bg-indigo-700 disabled:opacity-60 transition\"\n//                 >\n//                   {creating ? \"Creating...\" : \"Create Staff\"}\n//                 </button>\n\n//                 <p className=\"text-xs text-slate-500\">\n//                   Tip: a temporary password is generated automatically. Share it\n//                   with the staff member so they can log in.\n//                 </p>\n//               </form>\n//             </div>\n//           </div>\n\n//           {/* Staff table */}\n//           <div className=\"lg:col-span-2\">\n//             <div className=\"rounded-2xl border bg-white shadow-sm overflow-hidden\">\n//               <div className=\"px-6 py-5 border-b flex flex-col sm:flex-row sm:items-center gap-4 sm:justify-between\">\n//                 <div>\n//                   <h2 className=\"font-semibold text-slate-900\">\n//                     Staff Directory\n//                   </h2>\n//                   <p className=\"text-xs text-slate-500\">\n//                     Search, filter, and manage staff accounts\n//                   </p>\n//                 </div>\n\n//                 <div className=\"flex items-center gap-3\">\n//                   <div className=\"relative\">\n//                     <MagnifyingGlassIcon className=\"h-5 w-5 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2\" />\n//                     <input\n//                       value={query}\n//                       onChange={(e) => setQuery(e.target.value)}\n//                       placeholder=\"Search name, email, phone\"\n//                       className=\"pl-10 pr-3 py-2.5 rounded-xl border w-72 max-w-full focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     />\n//                   </div>\n\n//                   <select\n//                     value={roleFilter}\n//                     onChange={(e) => setRoleFilter(e.target.value)}\n//                     className=\"py-2.5 rounded-xl border bg-white px-3 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                   >\n//                     <option value=\"all\">All roles</option>\n//                     {STAFF_ROLES.map((r) => (\n//                       <option key={r.value} value={r.value}>\n//                         {r.label}\n//                       </option>\n//                     ))}\n//                   </select>\n\n//                   <button\n//                     onClick={fetchStaff}\n//                     className=\"inline-flex items-center gap-2 px-3 py-2.5 rounded-xl border hover:bg-slate-50 transition\"\n//                     title=\"Refresh\"\n//                   >\n//                     <ArrowPathIcon className=\"h-5 w-5\" />\n//                     <span className=\"hidden sm:inline\">Refresh</span>\n//                   </button>\n//                 </div>\n//               </div>\n\n//               {loading ? (\n//                 <div className=\"py-10 text-center text-slate-500\">\n//                   Loading staff…\n//                 </div>\n//               ) : filtered.length === 0 ? (\n//                 <div className=\"py-10 text-center text-slate-500\">\n//                   No staff found. Try changing your search/filter.\n//                 </div>\n//               ) : (\n//                 <div className=\"overflow-x-auto\">\n//                   <table className=\"min-w-full text-sm\">\n//                     <thead>\n//                       <tr className=\"text-left bg-slate-50 border-b\">\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Staff\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Role\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Contact\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Experience\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Joining\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Added\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Actions\n//                         </th>\n//                       </tr>\n//                     </thead>\n\n//                     <tbody>\n//                       {filtered.map((s) => (\n//                         <tr\n//                           key={s._id}\n//                           className=\"border-b last:border-b-0 hover:bg-slate-50/60\"\n//                         >\n//                           <td className=\"py-3.5 px-4\">\n//                             <div className=\"font-semibold text-slate-900\">\n//                               {s.name}\n//                             </div>\n//                             <div className=\"text-xs text-slate-500\">\n//                               {s.email}\n//                             </div>\n//                           </td>\n//                           <td className=\"py-3.5 px-4\">\n//                             <span\n//                               className={`inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold ${roleBadge(\n//                                 s.staffRole\n//                               )}`}\n//                             >\n//                               {String(s.staffRole).toUpperCase()}\n//                             </span>\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {s.phone || \"-\"}\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {s.experience === 0 || s.experience\n//                               ? `${s.experience} yrs`\n//                               : \"-\"}\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {fmtDate(s.joiningDate)}\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {fmtDate(s.createdAt)}\n//                           </td>\n//                           <td className=\"py-3.5 px-4\">\n//                             {s.role === \"parent\" && (\n//                               <button\n//                                 onClick={() => handleAdminRequest(s._id)}\n//                                 className=\"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition\"\n//                               >\n//                                 Request Admin\n//                               </button>\n//                             )}\n//                             <button\n//                               onClick={() => deleteStaff(s._id)}\n//                               className=\"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-rose-600 text-white hover:bg-rose-700 transition\"\n//                               title=\"Delete\"\n//                             >\n//                               <TrashIcon className=\"h-4 w-4\" />\n//                               Delete\n//                             </button>\n//                           </td>\n//                         </tr>\n//                       ))}\n//                     </tbody>\n//                   </table>\n//                 </div>\n//               )}\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport {\n  ArrowPathIcon,\n  MagnifyingGlassIcon,\n  UserPlusIcon,\n  TrashIcon,\n} from \"@heroicons/react/24/outline\";\nimport API from \"../utils/api\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport '../styles.css';\n\nconst STAFF_ROLES = [\n  { value: \"caregiver\", label: \"Caregiver\" },\n  { value: \"teacher\", label: \"Teacher\" },\n  { value: \"cook\", label: \"Cook\" },\n];\n\nconst roleBadge = (staffRole) => {\n  const v = String(staffRole || \"\").toLowerCase();\n  if (v === \"teacher\") return \"bg-indigo-50 text-indigo-700 border-indigo-200\";\n  if (v === \"cook\") return \"bg-amber-50 text-amber-700 border-amber-200\";\n  return \"bg-emerald-50 text-emerald-700 border-emerald-200\"; // caregiver default\n};\n\nconst fmtDate = (d) => (d ? new Date(d).toLocaleDateString() : \"-\");\n\nexport default function AdminDashboard() {\n  const { user, logout } = React.useContext(AuthContext);\n\n  // Staff state\n  const [staffList, setStaffList] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [creating, setCreating] = useState(false);\n  const [status, setStatus] = useState(null); // {type, msg}\n  const [query, setQuery] = useState(\"\");\n  const [roleFilter, setRoleFilter] = useState(\"all\");\n\n  const [form, setForm] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    staffRole: \"caregiver\",\n    experience: \"\",\n    joiningDate: \"\",\n  });\n\n  // Children state\n  const [children, setChildren] = useState([]);\n  const [childrenLoading, setChildrenLoading] = useState(true);\n  const [assigningId, setAssigningId] = useState(null); // childId while assigning\n\n  // Staff Activities state\n  const [staffActivities, setStaffActivities] = useState([]);\n  const [activitiesLoading, setActivitiesLoading] = useState(true);\n\n  // Fetch staff activities\n  const fetchStaffActivities = async () => {\n    setActivitiesLoading(true);\n    try {\n      const res = await API.get(\"/admin/staff-record\");\n      // Sort by latest first\n      const sorted = (res.data.data || []).sort(\n        (a, b) => new Date(b.createdAt) - new Date(a.createdAt)\n      );\n      setStaffActivities(sorted);\n    } catch (err) {\n      console.error(\"Failed to fetch staff activities:\", err);\n      setStatus({\n        type: \"error\",\n        msg: \"Failed to load staff activity records.\",\n      });\n      setStaffActivities([]);\n    } finally {\n      setActivitiesLoading(false);\n    }\n  };\n\n  // Fetch on mount (add to existing useEffect)\n\n  // Fetch staff\n  const fetchStaff = async () => {\n    setLoading(true);\n    setStatus(null);\n    try {\n      const res = await API.get(\"/users/staff\");\n      setStaffList(res.data?.data || []);\n    } catch (e) {\n      console.error(e);\n      setStatus({ type: \"error\", msg: \"Failed to load staff list.\" });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fetch children\n  const fetchChildren = async () => {\n    setChildrenLoading(true);\n    try {\n      const res = await API.get(\"/admin/getallchildren\");\n      setChildren(res.data || []);\n    } catch (err) {\n      console.error(err);\n      setStatus({ type: \"error\", msg: \"Failed to load children.\" });\n    } finally {\n      setChildrenLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchStaff();\n    fetchChildren();\n    fetchStaffActivities();\n  }, []);\n\n  // Staff stats\n  const stats = useMemo(() => {\n    const total = staffList.length;\n    const caregiver = staffList.filter(\n      (s) => s.staffRole === \"caregiver\"\n    ).length;\n    const teacher = staffList.filter((s) => s.staffRole === \"teacher\").length;\n    const cook = staffList.filter((s) => s.staffRole === \"cook\").length;\n    return { total, caregiver, teacher, cook };\n  }, [staffList]);\n\n  // Filtered staff\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    return staffList\n      .filter((s) => {\n        if (roleFilter !== \"all\" && s.staffRole !== roleFilter) return false;\n        if (!q) return true;\n        const hay = `${s.name || \"\"} ${s.email || \"\"} ${\n          s.phone || \"\"\n        }`.toLowerCase();\n        return hay.includes(q);\n      })\n      .slice()\n      .sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\n  }, [staffList, query, roleFilter]);\n\n  // List of caregivers only (for dropdown)\n  const caregivers = useMemo(() => {\n    return staffList\n      .filter((s) => s.staffRole === \"caregiver\")\n      .sort((a, b) => a.name.localeCompare(b.name));\n  }, [staffList]);\n\n  // Create staff\n  const handleCreateStaff = async (e) => {\n    e.preventDefault();\n    setStatus(null);\n    setCreating(true);\n    try {\n      const payload = {\n        name: form.name.trim(),\n        email: form.email.trim(),\n        phone: form.phone.trim(),\n        staffRole: form.staffRole,\n        experience:\n          form.experience === \"\" ? undefined : Number(form.experience),\n        joiningDate: form.joiningDate || undefined,\n      };\n      const res = await API.post(\"/users/staff\", payload);\n      const created = res.data?.data;\n      const tempPassword = res.data?.tempPassword;\n\n      setStaffList((prev) => [created, ...prev].filter(Boolean));\n      setForm({\n        name: \"\",\n        email: \"\",\n        phone: \"\",\n        staffRole: \"caregiver\",\n        experience: \"\",\n        joiningDate: \"\",\n      });\n      setStatus({\n        type: \"success\",\n        msg: tempPassword\n          ? `Staff created. Temporary password: ${tempPassword}`\n          : \"Staff created successfully.\",\n      });\n    } catch (err) {\n      console.error(err);\n      setStatus({\n        type: \"error\",\n        msg: err.response?.data?.error || \"Failed to create staff.\",\n      });\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  // Delete staff\n  const deleteStaff = async (id) => {\n    if (!window.confirm(\"Remove this staff member?\")) return;\n    try {\n      await API.delete(`/users/${id}`);\n      setStaffList((prev) => prev.filter((s) => s._id !== id));\n      setStatus({ type: \"success\", msg: \"Staff deleted.\" });\n    } catch (err) {\n      console.error(err);\n      setStatus({ type: \"error\", msg: \"Failed to delete staff.\" });\n    }\n  };\n\n  // Assign caregiver\n  const handleAssignCaregiver = async (childId, caregiverId) => {\n    // Allow empty string to unassign\n    setAssigningId(childId);\n    try {\n      await API.post(\"/admin/assign-caregiver\", {\n        childId,\n        caregiverId: caregiverId || null, // backend should handle null/empty as unassign if needed\n      });\n\n      setChildren((prev) =>\n        prev.map((c) =>\n          c._id === childId ? { ...c, caregiver: caregiverId || null } : c\n        )\n      );\n\n      setStatus({\n        type: \"success\",\n        msg: \"Caregiver assigned successfully!\",\n      });\n    } catch (err) {\n      console.error(err);\n      setStatus({\n        type: \"error\",\n        msg: err.response?.data?.error || \"Failed to assign caregiver.\",\n      });\n    } finally {\n      setAssigningId(null);\n    }\n  };\n\n  const handleUpdateCaregiver = async (childId, caregiverId) => {\n    setAssigningId(childId);\n    try {\n      await API.put(`/admin/assign-caregiver/${childId}`, {\n        caregiverId: caregiverId || null,\n      });\n\n      // Update local state\n      setChildren((prev) =>\n        prev.map((c) =>\n          c._id === childId ? { ...c, caregiver: caregiverId } : c\n        )\n      );\n\n      setStatus({\n        type: \"success\",\n        msg: caregiverId\n          ? \"Caregiver assigned successfully!\"\n          : \"Caregiver removed successfully!\",\n      });\n    } catch (err) {\n      console.error(err);\n      setStatus({\n        type: \"error\",\n        msg: err.response?.data?.error || \"Failed to update caregiver.\",\n      });\n    } finally {\n      setAssigningId(null);\n    }\n  };\n\n  // Helper to get caregiver name\n  const getCaregiverName = (caregiverId) => {\n    if (!caregiverId) return \"None\";\n    const cg = staffList.find((s) => s._id === caregiverId);\n    return cg ? cg.name : \"Unknown\";\n  };\n\n  return (\n    <div className=\"app-container\" style={{ background: 'linear-gradient(135deg, #f5cfcf 0%, #dbbfbf 100%)', minHeight: '100vh', padding: '0' }}>\n      {/* Top bar - Header */}\n      <header className=\"header\" style={{ marginBottom: '0', borderRadius: '0', position: 'sticky', top: 0, zIndex: 10 }}>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', gap: '15px' }}>\n          <div>\n            <h1 className=\"gwendolyn-bold\" style={{ fontSize: '2rem', marginBottom: '5px' }}>🏡 SmartDaycare - Admin Portal</h1>\n            <p style={{ fontSize: '1rem', marginBottom: '0' }}>\n              Staff management • children • caregiver assignment\n            </p>\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '15px', flexWrap: 'wrap' }}>\n            <div style={{ textAlign: 'right' }}>\n              <div style={{ fontWeight: '600', fontSize: '0.95rem' }}>\n                {user?.name || \"Admin\"}\n              </div>\n              <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>{user?.email}</div>\n            </div>\n            <button\n              onClick={logout}\n              className=\"nav-btn\"\n              style={{ background: '#ef4444' }}\n            >\n              Logout\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"app-container\" style={{ maxWidth: '1400px', margin: '0 auto', padding: '20px' }}>\n        {/* Status Message */}\n        {status?.type && (\n          <div\n            className=\"form-container\"\n            style={{\n              marginBottom: '20px',\n              background: status.type === \"success\" ? '#d1fae5' : '#fee2e2',\n              border: `2px solid ${status.type === \"success\" ? '#10b981' : '#ef4444'}`,\n              padding: '15px 20px'\n            }}\n          >\n            <p style={{ \n              color: status.type === \"success\" ? '#065f46' : '#991b1b',\n              fontWeight: '600',\n              margin: 0\n            }}>\n              {status.msg}\n            </p>\n          </div>\n        )}\n\n        {/* Stats Cards */}\n        <div className=\"summary-grid\" style={{ marginBottom: '30px' }}>\n          <div className=\"summary-item\">\n            <div className=\"summary-value\">{stats.total}</div>\n            <div className=\"summary-label\">Total Staff</div>\n          </div>\n          <div className=\"summary-item\">\n            <div className=\"summary-value\">{stats.caregiver}</div>\n            <div className=\"summary-label\">Caregivers</div>\n          </div>\n          <div className=\"summary-item\">\n            <div className=\"summary-value\">{stats.teacher}</div>\n            <div className=\"summary-label\">Teachers</div>\n          </div>\n          <div className=\"summary-item\">\n            <div className=\"summary-value\">{stats.cook}</div>\n            <div className=\"summary-label\">Cooks</div>\n          </div>\n        </div>\n\n        {/* Staff Management Section */}\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '30px', marginBottom: '30px' }}>\n          {/* Add Staff Form */}\n          <div>\n            <div className=\"form-container\">\n              <h2>➕ Add Staff</h2>\n              <p style={{ marginBottom: '20px', color: '#6b7280', fontSize: '0.9rem' }}>\n                Create a staff account with a sub-role\n              </p>\n              <form onSubmit={handleCreateStaff}>\n                <div>\n                  <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n                    Full Name\n                  </label>\n                  <input\n                    value={form.name}\n                    onChange={(e) => setForm({ ...form, name: e.target.value })}\n                    required\n                    className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n                    placeholder=\"e.g., Ayesha Rahman\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n                    Email\n                  </label>\n                  <input\n                    type=\"email\"\n                    value={form.email}\n                    onChange={(e) =>\n                      setForm({ ...form, email: e.target.value })\n                    }\n                    required\n                    className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n                    placeholder=\"e.g., staff@daycare.com\"\n                  />\n                </div>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n                      Phone\n                    </label>\n                    <input\n                      value={form.phone}\n                      onChange={(e) =>\n                        setForm({ ...form, phone: e.target.value })\n                      }\n                      className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n                      placeholder=\"017XXXXXXXX\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n                      Staff Role\n                    </label>\n                    <select\n                      value={form.staffRole}\n                      onChange={(e) =>\n                        setForm({ ...form, staffRole: e.target.value })\n                      }\n                      className=\"w-full rounded-xl border px-3 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n                    >\n                      {STAFF_ROLES.map((r) => (\n                        <option key={r.value} value={r.value}>\n                          {r.label}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n                      Experience (years)\n                    </label>\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      value={form.experience}\n                      onChange={(e) =>\n                        setForm({ ...form, experience: e.target.value })\n                      }\n                      className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n                      placeholder=\"e.g., 3\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n                      Joining Date\n                    </label>\n                    <input\n                      type=\"date\"\n                      value={form.joiningDate}\n                      onChange={(e) =>\n                        setForm({ ...form, joiningDate: e.target.value })\n                      }\n                      className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n                    />\n                  </div>\n                </div>\n                <button\n                  type=\"submit\"\n                  disabled={creating}\n                  className=\"w-full rounded-xl bg-indigo-600 text-white py-2.5 font-semibold hover:bg-indigo-700 disabled:opacity-60 transition\"\n                >\n                  {creating ? \"Creating...\" : \"Create Staff\"}\n                </button>\n                <p className=\"text-xs text-slate-500\">\n                  A temporary password will be generated and shown after\n                  creation.\n                </p>\n              </form>\n            </div>\n          </div>\n\n          {/* Staff Directory Table */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"rounded-2xl border bg-white shadow-sm overflow-hidden\">\n              <div className=\"px-6 py-5 border-b flex flex-col sm:flex-row sm:items-center gap-4 sm:justify-between\">\n                <div>\n                  <h2 className=\"font-semibold text-slate-900\">\n                    Staff Directory\n                  </h2>\n                  <p className=\"text-xs text-slate-500\">\n                    Search, filter, and manage staff accounts\n                  </p>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"relative\">\n                    <MagnifyingGlassIcon className=\"h-5 w-5 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2\" />\n                    <input\n                      value={query}\n                      onChange={(e) => setQuery(e.target.value)}\n                      placeholder=\"Search name, email, phone\"\n                      className=\"pl-10 pr-3 py-2.5 rounded-xl border w-72 max-w-full focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n                    />\n                  </div>\n                  <select\n                    value={roleFilter}\n                    onChange={(e) => setRoleFilter(e.target.value)}\n                    className=\"py-2.5 rounded-xl border bg-white px-3 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n                  >\n                    <option value=\"all\">All roles</option>\n                    {STAFF_ROLES.map((r) => (\n                      <option key={r.value} value={r.value}>\n                        {r.label}\n                      </option>\n                    ))}\n                  </select>\n                  <button\n                    onClick={fetchStaff}\n                    className=\"inline-flex items-center gap-2 px-3 py-2.5 rounded-xl border hover:bg-slate-50 transition\"\n                    title=\"Refresh\"\n                  >\n                    <ArrowPathIcon className=\"h-5 w-5\" />\n                    <span className=\"hidden sm:inline\">Refresh</span>\n                  </button>\n                </div>\n              </div>\n\n              {loading ? (\n                <div className=\"py-10 text-center text-slate-500\">\n                  Loading staff…\n                </div>\n              ) : filtered.length === 0 ? (\n                <div className=\"py-10 text-center text-slate-500\">\n                  No staff found.\n                </div>\n              ) : (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"min-w-full text-sm\">\n                    <thead>\n                      <tr className=\"text-left bg-slate-50 border-b\">\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Staff\n                        </th>\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Role\n                        </th>\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Contact\n                        </th>\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Experience\n                        </th>\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Joining\n                        </th>\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Added\n                        </th>\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Actions\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {filtered.map((s) => (\n                        <tr\n                          key={s._id}\n                          className=\"border-b last:border-b-0 hover:bg-slate-50/60\"\n                        >\n                          <td className=\"py-3.5 px-4\">\n                            <div className=\"font-semibold text-slate-900\">\n                              {s.name}\n                            </div>\n                            <div className=\"text-xs text-slate-500\">\n                              {s.email}\n                            </div>\n                          </td>\n                          <td className=\"py-3.5 px-4\">\n                            <span\n                              className={`inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold ${roleBadge(\n                                s.staffRole\n                              )}`}\n                            >\n                              {String(s.staffRole).toUpperCase()}\n                            </span>\n                          </td>\n                          <td className=\"py-3.5 px-4 text-slate-700\">\n                            {s.phone || \"-\"}\n                          </td>\n                          <td className=\"py-3.5 px-4 text-slate-700\">\n                            {s.experience !== undefined\n                              ? `${s.experience} yrs`\n                              : \"-\"}\n                          </td>\n                          <td className=\"py-3.5 px-4 text-slate-700\">\n                            {fmtDate(s.joiningDate)}\n                          </td>\n                          <td className=\"py-3.5 px-4 text-slate-700\">\n                            {fmtDate(s.createdAt)}\n                          </td>\n                          <td className=\"py-3.5 px-4\">\n                            <button\n                              onClick={() => deleteStaff(s._id)}\n                              className=\"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-rose-600 text-white hover:bg-rose-700 transition text-sm\"\n                            >\n                              <TrashIcon className=\"h-4 w-4\" />\n                              Delete\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Children & Caregiver Assignment Section */}\n        {/* Children & Caregiver Assignment Section - Updated */}\n        <div className=\"rounded-2xl border bg-white shadow-sm overflow-hidden\">\n          <div className=\"px-6 py-5 border-b flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 rounded-xl bg-emerald-50 border border-emerald-100\">\n                <UserPlusIcon className=\"h-5 w-5 text-emerald-700\" />\n              </div>\n              <div>\n                <h2 className=\"font-semibold text-slate-900\">\n                  Children & Caregiver Management\n                </h2>\n                <p className=\"text-xs text-slate-500\">\n                  Assign, update, or remove caregivers for each child\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={fetchChildren}\n              className=\"inline-flex items-center gap-2 px-3 py-2.5 rounded-xl border hover:bg-slate-50 transition\"\n            >\n              <ArrowPathIcon className=\"h-5 w-5\" />\n              <span className=\"hidden sm:inline\">Refresh</span>\n            </button>\n          </div>\n\n          {childrenLoading ? (\n            <div className=\"py-10 text-center text-slate-500\">\n              Loading children…\n            </div>\n          ) : children.length === 0 ? (\n            <div className=\"py-10 text-center text-slate-500\">\n              No children registered yet.\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full text-sm\">\n                <thead>\n                  <tr className=\"text-left bg-slate-50 border-b\">\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Child\n                    </th>\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Date of Birth\n                    </th>\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Parent\n                    </th>\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Current Caregiver\n                    </th>\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {children.map((child) => (\n                    <tr\n                      key={child._id}\n                      className=\"border-b last:border-b-0 hover:bg-slate-50/60\"\n                    >\n                      <td className=\"py-3.5 px-4\">\n                        <div className=\"font-semibold text-slate-900\">\n                          {child.name}\n                        </div>\n                        <div className=\"text-xs text-slate-500\">\n                          ID: {child._id}\n                        </div>\n                      </td>\n                      <td className=\"py-3.5 px-4 text-slate-700\">\n                        {child.dateOfBirth\n                          ? new Date(child.dateOfBirth).toLocaleDateString()\n                          : \"-\"}\n                      </td>\n                      <td className=\"py-3.5 px-4 text-slate-700\">\n                        {child.parent?.name || \"-\"}\n                      </td>\n                      <td className=\"py-3.5 px-4\">\n                        <span\n                          className={`inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold ${\n                            child.caregiver\n                              ? \"bg-emerald-50 text-emerald-700 border-emerald-200\"\n                              : \"bg-gray-100 text-gray-600 border-gray-300\"\n                          }`}\n                        >\n                          {getCaregiverName(child.caregiver)}\n                        </span>\n                      </td>\n                      <td className=\"py-3.5 px-4\">\n                        <div className=\"flex items-center gap-3\">\n                          {/* Assign / Update Caregiver Dropdown */}\n                          <select\n                            value={child.caregiver || \"\"}\n                            disabled={assigningId === child._id}\n                            onChange={(e) => {\n                              const newCaregiverId = e.target.value || null;\n                              handleUpdateCaregiver(child._id, newCaregiverId);\n                            }}\n                            className=\"rounded-xl border px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n                          >\n                            <option value=\"\">— No caregiver —</option>\n                            {caregivers.map((cg) => (\n                              <option key={cg._id} value={cg._id}>\n                                {cg.name} ({cg.email})\n                              </option>\n                            ))}\n                          </select>\n\n                          {/* Explicit Remove Button */}\n                          {child.caregiver && (\n                            <button\n                              onClick={() =>\n                                handleUpdateCaregiver(child._id, null)\n                              }\n                              disabled={assigningId === child._id}\n                              className=\"px-3 py-2 rounded-xl bg-rose-600 text-white text-sm hover:bg-rose-700 disabled:opacity-60 transition flex items-center gap-1.5\"\n                            >\n                              <TrashIcon className=\"h-4 w-4\" />\n                              Remove\n                            </button>\n                          )}\n\n                          {assigningId === child._id && (\n                            <span className=\"text-xs text-slate-500\">\n                              saving…\n                            </span>\n                          )}\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n\n        {/* ==================== STAFF ACTIVITY RECORDS SECTION ==================== */}\n        <div className=\"rounded-2xl border bg-white shadow-sm overflow-hidden\">\n          <div className=\"px-6 py-5 border-b flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 rounded-xl bg-amber-50 border border-amber-100\">\n                <ArrowPathIcon className=\"h-5 w-5 text-amber-700\" />\n              </div>\n              <div>\n                <h2 className=\"font-semibold text-slate-900\">\n                  Staff Activity Log\n                </h2>\n                <p className=\"text-xs text-slate-500\">\n                  All recorded activities from caregivers, teachers, and cooks\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={fetchStaffActivities}\n              disabled={activitiesLoading}\n              className=\"inline-flex items-center gap-2 px-3 py-2.5 rounded-xl border hover:bg-slate-50 transition disabled:opacity-60\"\n            >\n              <ArrowPathIcon\n                className={`h-5 w-5 ${activitiesLoading ? \"animate-spin\" : \"\"}`}\n              />\n              <span className=\"hidden sm:inline\">Refresh</span>\n            </button>\n          </div>\n\n          {activitiesLoading ? (\n            <div className=\"py-10 text-center text-slate-500\">\n              Loading activities…\n            </div>\n          ) : staffActivities.length === 0 ? (\n            <div className=\"py-10 text-center text-slate-500\">\n              No staff activities recorded yet.\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full text-sm\">\n                <thead>\n                  <tr className=\"text-left bg-slate-50 border-b\">\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Staff Member\n                    </th>\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Role\n                    </th>\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Activity\n                    </th>\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Timestamp\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {staffActivities.map((activity) => {\n                    const staff = staffList.find(\n                      (s) => s._id === activity.staffId\n                    );\n                    return (\n                      <tr\n                        key={activity._id}\n                        className=\"border-b last:border-b-0 hover:bg-slate-50/60\"\n                      >\n                        <td className=\"py-3.5 px-4\">\n                          <div className=\"font-medium text-slate-900\">\n                            {staff?.name || \"Unknown Staff\"}\n                          </div>\n                          <div className=\"text-xs text-slate-500\">\n                            {staff?.email || \"-\"}\n                          </div>\n                        </td>\n                        <td className=\"py-3.5 px-4\">\n                          <span\n                            className={`inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold ${roleBadge(\n                              staff?.staffRole\n                            )}`}\n                          >\n                            {staff?.staffRole?.toUpperCase() || \"N/A\"}\n                          </span>\n                        </td>\n                        <td className=\"py-3.5 px-4 text-slate-700 font-medium\">\n                          {activity.activityname}\n                        </td>\n                        <td className=\"py-3.5 px-4 text-slate-700\">\n                          {new Date(activity.createdAt).toLocaleString()}\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}