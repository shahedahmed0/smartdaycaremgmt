{"ast":null,"code":"import _objectSpread from\"/media/dh77b/New Volume/smartdaycare/merged-project/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// import React, { useEffect, useMemo, useState } from \"react\";\n// import {\n//   ArrowPathIcon,\n//   MagnifyingGlassIcon,\n//   UserPlusIcon,\n//   TrashIcon,\n// } from \"@heroicons/react/24/outline\";\n// import API from \"../utils/api\";\n// import { AuthContext } from \"../context/AuthContext\";\n// const STAFF_ROLES = [\n//   { value: \"caregiver\", label: \"Caregiver\" },\n//   { value: \"teacher\", label: \"Teacher\" },\n//   { value: \"cook\", label: \"Cook\" },\n// ];\n// const roleBadge = (staffRole) => {\n//   const v = String(staffRole || \"\").toLowerCase();\n//   if (v === \"teacher\") return \"bg-indigo-50 text-indigo-700 border-indigo-200\";\n//   if (v === \"cook\") return \"bg-amber-50 text-amber-700 border-amber-200\";\n//   return \"bg-emerald-50 text-emerald-700 border-emerald-200\"; // caregiver default\n// };\n// const fmtDate = (d) => (d ? new Date(d).toLocaleDateString() : \"-\");\n// export default function AdminDashboard() {\n//   const { user, logout } = React.useContext(AuthContext);\n//   const [staffList, setStaffList] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [creating, setCreating] = useState(false);\n//   const [status, setStatus] = useState(null); // {type, msg}\n//   const [query, setQuery] = useState(\"\");\n//   const [roleFilter, setRoleFilter] = useState(\"all\");\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     email: \"\",\n//     phone: \"\",\n//     staffRole: \"\",\n//     experience: \"\",\n//     joiningDate: \"\",\n//   });\n//   const fetchStaff = async () => {\n//     setLoading(true);\n//     setStatus(null);\n//     try {\n//       const res = await API.get(\"/users/staff\");\n//       setStaffList(res.data?.data || []);\n//       console.log(res.data);\n//     } catch (e) {\n//       console.error(e);\n//       setStatus({ type: \"error\", msg: \"Failed to load staff list.\" });\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   useEffect(() => {\n//     fetchStaff();\n//   }, []);\n//   const stats = useMemo(() => {\n//     const total = staffList.length;\n//     const caregiver = staffList.filter(\n//       (s) => s.staffRole === \"caregiver\"\n//     ).length;\n//     const teacher = staffList.filter((s) => s.staffRole === \"teacher\").length;\n//     const cook = staffList.filter((s) => s.staffRole === \"cook\").length;\n//     return { total, caregiver, teacher, cook };\n//   }, [staffList]);\n//   const filtered = useMemo(() => {\n//     const q = query.trim().toLowerCase();\n//     return staffList\n//       .filter((s) => {\n//         if (roleFilter !== \"all\" && s.staffRole !== roleFilter) return false;\n//         if (!q) return true;\n//         const hay = `${s.name || \"\"} ${s.email || \"\"} ${\n//           s.phone || \"\"\n//         }`.toLowerCase();\n//         return hay.includes(q);\n//       })\n//       .slice()\n//       .sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\n//   }, [staffList, query, roleFilter]);\n//   const handleCreateStaff = async (e) => {\n//     e.preventDefault();\n//     setStatus(null);\n//     setCreating(true);\n//     try {\n//       const payload = {\n//         name: form.name.trim(),\n//         email: form.email.trim(),\n//         phone: form.phone.trim(),\n//         staffRole: form.staffRole,\n//         experience:\n//           form.experience === \"\" ? undefined : Number(form.experience),\n//         joiningDate: form.joiningDate || undefined,\n//       };\n//       console.log(payload);\n//       const res = await API.post(\"/users/staff\", payload);\n//       const created = res.data?.data;\n//       const tempPassword = res.data?.tempPassword;\n//       setStaffList((prev) => [created, ...prev].filter(Boolean));\n//       setForm({\n//         name: \"\",\n//         email: \"\",\n//         phone: \"\",\n//         staffRole: \"caregiver\",\n//         experience: \"\",\n//         joiningDate: \"\",\n//       });\n//       setStatus({\n//         type: \"success\",\n//         msg: tempPassword\n//           ? `Staff created. Temporary password: ${tempPassword} (share this with staff to log in).`\n//           : \"Staff created successfully.\",\n//       });\n//     } catch (err) {\n//       console.error(err);\n//       setStatus({\n//         type: \"error\",\n//         msg: err.response?.data?.error || \"Failed to create staff.\",\n//       });\n//     } finally {\n//       setCreating(false);\n//     }\n//   };\n//   const deleteStaff = async (id) => {\n//     if (!window.confirm(\"Remove this staff member?\")) return;\n//     try {\n//       await API.delete(`/users/${id}`);\n//       setStaffList((prev) => prev.filter((s) => s._id !== id));\n//     } catch (err) {\n//       console.error(err);\n//       setStatus({ type: \"error\", msg: \"Failed to delete staff.\" });\n//     }\n//   };\n//   // Handle Admin Request for User\n//   const handleAdminRequest = async (id) => {\n//     try {\n//       const res = await API.post(`/users/request-admin/${id}`);\n//       alert(res.data?.message || \"Admin request submitted successfully.\");\n//     } catch (err) {\n//       alert(\"Failed to submit admin request.\");\n//     }\n//   };\n//   return (\n//     <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50\">\n//       {/* Top bar */}\n//       <div className=\"sticky top-0 z-10 border-b bg-white/80 backdrop-blur\">\n//         <div className=\"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between\">\n//           <div>\n//             <h1 className=\"text-2xl font-bold text-slate-900\">Admin Portal</h1>\n//             <p className=\"text-sm text-slate-600\">\n//               Staff management • roles • onboarding\n//             </p>\n//           </div>\n//           <div className=\"flex items-center gap-3\">\n//             <div className=\"hidden sm:block text-right\">\n//               <div className=\"text-sm font-semibold text-slate-900\">\n//                 {user?.name || \"Admin\"}\n//               </div>\n//               <div className=\"text-xs text-slate-500\">{user?.email}</div>\n//             </div>\n//             <button\n//               onClick={logout}\n//               className=\"px-4 py-2 rounded-xl bg-slate-900 text-white hover:bg-slate-800 transition\"\n//             >\n//               Logout\n//             </button>\n//           </div>\n//         </div>\n//       </div>\n//       <div className=\"max-w-7xl mx-auto px-4 py-8\">\n//         {/* Status */}\n//         {status?.type && (\n//           <div\n//             className={`mb-6 rounded-2xl border px-4 py-3 text-sm shadow-sm ${\n//               status.type === \"success\"\n//                 ? \"bg-emerald-50 text-emerald-800 border-emerald-200\"\n//                 : \"bg-rose-50 text-rose-800 border-rose-200\"\n//             }`}\n//           >\n//             {status.msg}\n//           </div>\n//         )}\n//         {/* Stats */}\n//         <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Total Staff</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.total}\n//             </div>\n//           </div>\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Caregivers</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.caregiver}\n//             </div>\n//           </div>\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Teachers</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.teacher}\n//             </div>\n//           </div>\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Cooks</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.cook}\n//             </div>\n//           </div>\n//         </div>\n//         <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n//           {/* Create staff */}\n//           <div className=\"lg:col-span-1\">\n//             <div className=\"rounded-2xl border bg-white shadow-sm overflow-hidden\">\n//               <div className=\"px-6 py-5 border-b flex items-center gap-3\">\n//                 <div className=\"p-2 rounded-xl bg-indigo-50 border border-indigo-100\">\n//                   <UserPlusIcon className=\"h-5 w-5 text-indigo-700\" />\n//                 </div>\n//                 <div>\n//                   <h2 className=\"font-semibold text-slate-900\">Add Staff</h2>\n//                   <p className=\"text-xs text-slate-500\">\n//                     Create a staff account with a sub-role\n//                   </p>\n//                 </div>\n//               </div>\n//               <form onSubmit={handleCreateStaff} className=\"p-6 space-y-4\">\n//                 <div>\n//                   <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                     Full Name\n//                   </label>\n//                   <input\n//                     value={form.name}\n//                     onChange={(e) => setForm({ ...form, name: e.target.value })}\n//                     required\n//                     className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     placeholder=\"e.g., Ayesha Rahman\"\n//                   />\n//                 </div>\n//                 <div>\n//                   <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                     Email\n//                   </label>\n//                   <input\n//                     type=\"email\"\n//                     value={form.email}\n//                     onChange={(e) =>\n//                       setForm({ ...form, email: e.target.value })\n//                     }\n//                     required\n//                     className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     placeholder=\"e.g., staff@daycare.com\"\n//                   />\n//                 </div>\n//                 <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Phone\n//                     </label>\n//                     <input\n//                       value={form.phone}\n//                       onChange={(e) =>\n//                         setForm({ ...form, phone: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                       placeholder=\"017XXXXXXXX\"\n//                     />\n//                   </div>\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Staff Role\n//                     </label>\n//                     <select\n//                       value={form.staffRole}\n//                       onChange={(e) =>\n//                         setForm({ ...form, staffRole: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     >\n//                       {STAFF_ROLES.map((r) => (\n//                         <option key={r.value} value={r.value}>\n//                           {r.label}\n//                         </option>\n//                       ))}\n//                     </select>\n//                   </div>\n//                 </div>\n//                 <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Experience (years)\n//                     </label>\n//                     <input\n//                       type=\"number\"\n//                       min=\"0\"\n//                       value={form.experience}\n//                       onChange={(e) =>\n//                         setForm({ ...form, experience: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                       placeholder=\"e.g., 3\"\n//                     />\n//                   </div>\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Joining Date\n//                     </label>\n//                     <input\n//                       type=\"date\"\n//                       value={form.joiningDate}\n//                       onChange={(e) =>\n//                         setForm({ ...form, joiningDate: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     />\n//                   </div>\n//                 </div>\n//                 <button\n//                   type=\"submit\"\n//                   disabled={creating}\n//                   className=\"w-full rounded-xl bg-indigo-600 text-white py-2.5 font-semibold hover:bg-indigo-700 disabled:opacity-60 transition\"\n//                 >\n//                   {creating ? \"Creating...\" : \"Create Staff\"}\n//                 </button>\n//                 <p className=\"text-xs text-slate-500\">\n//                   Tip: a temporary password is generated automatically. Share it\n//                   with the staff member so they can log in.\n//                 </p>\n//               </form>\n//             </div>\n//           </div>\n//           {/* Staff table */}\n//           <div className=\"lg:col-span-2\">\n//             <div className=\"rounded-2xl border bg-white shadow-sm overflow-hidden\">\n//               <div className=\"px-6 py-5 border-b flex flex-col sm:flex-row sm:items-center gap-4 sm:justify-between\">\n//                 <div>\n//                   <h2 className=\"font-semibold text-slate-900\">\n//                     Staff Directory\n//                   </h2>\n//                   <p className=\"text-xs text-slate-500\">\n//                     Search, filter, and manage staff accounts\n//                   </p>\n//                 </div>\n//                 <div className=\"flex items-center gap-3\">\n//                   <div className=\"relative\">\n//                     <MagnifyingGlassIcon className=\"h-5 w-5 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2\" />\n//                     <input\n//                       value={query}\n//                       onChange={(e) => setQuery(e.target.value)}\n//                       placeholder=\"Search name, email, phone\"\n//                       className=\"pl-10 pr-3 py-2.5 rounded-xl border w-72 max-w-full focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     />\n//                   </div>\n//                   <select\n//                     value={roleFilter}\n//                     onChange={(e) => setRoleFilter(e.target.value)}\n//                     className=\"py-2.5 rounded-xl border bg-white px-3 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                   >\n//                     <option value=\"all\">All roles</option>\n//                     {STAFF_ROLES.map((r) => (\n//                       <option key={r.value} value={r.value}>\n//                         {r.label}\n//                       </option>\n//                     ))}\n//                   </select>\n//                   <button\n//                     onClick={fetchStaff}\n//                     className=\"inline-flex items-center gap-2 px-3 py-2.5 rounded-xl border hover:bg-slate-50 transition\"\n//                     title=\"Refresh\"\n//                   >\n//                     <ArrowPathIcon className=\"h-5 w-5\" />\n//                     <span className=\"hidden sm:inline\">Refresh</span>\n//                   </button>\n//                 </div>\n//               </div>\n//               {loading ? (\n//                 <div className=\"py-10 text-center text-slate-500\">\n//                   Loading staff…\n//                 </div>\n//               ) : filtered.length === 0 ? (\n//                 <div className=\"py-10 text-center text-slate-500\">\n//                   No staff found. Try changing your search/filter.\n//                 </div>\n//               ) : (\n//                 <div className=\"overflow-x-auto\">\n//                   <table className=\"min-w-full text-sm\">\n//                     <thead>\n//                       <tr className=\"text-left bg-slate-50 border-b\">\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Staff\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Role\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Contact\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Experience\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Joining\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Added\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Actions\n//                         </th>\n//                       </tr>\n//                     </thead>\n//                     <tbody>\n//                       {filtered.map((s) => (\n//                         <tr\n//                           key={s._id}\n//                           className=\"border-b last:border-b-0 hover:bg-slate-50/60\"\n//                         >\n//                           <td className=\"py-3.5 px-4\">\n//                             <div className=\"font-semibold text-slate-900\">\n//                               {s.name}\n//                             </div>\n//                             <div className=\"text-xs text-slate-500\">\n//                               {s.email}\n//                             </div>\n//                           </td>\n//                           <td className=\"py-3.5 px-4\">\n//                             <span\n//                               className={`inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold ${roleBadge(\n//                                 s.staffRole\n//                               )}`}\n//                             >\n//                               {String(s.staffRole).toUpperCase()}\n//                             </span>\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {s.phone || \"-\"}\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {s.experience === 0 || s.experience\n//                               ? `${s.experience} yrs`\n//                               : \"-\"}\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {fmtDate(s.joiningDate)}\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {fmtDate(s.createdAt)}\n//                           </td>\n//                           <td className=\"py-3.5 px-4\">\n//                             {s.role === \"parent\" && (\n//                               <button\n//                                 onClick={() => handleAdminRequest(s._id)}\n//                                 className=\"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition\"\n//                               >\n//                                 Request Admin\n//                               </button>\n//                             )}\n//                             <button\n//                               onClick={() => deleteStaff(s._id)}\n//                               className=\"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-rose-600 text-white hover:bg-rose-700 transition\"\n//                               title=\"Delete\"\n//                             >\n//                               <TrashIcon className=\"h-4 w-4\" />\n//                               Delete\n//                             </button>\n//                           </td>\n//                         </tr>\n//                       ))}\n//                     </tbody>\n//                   </table>\n//                 </div>\n//               )}\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\nimport React,{useEffect,useMemo,useState}from\"react\";import{ArrowPathIcon,MagnifyingGlassIcon,UserPlusIcon,TrashIcon}from\"@heroicons/react/24/outline\";import API from\"../utils/api\";import{AuthContext}from\"../context/AuthContext\";import'../styles.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const STAFF_ROLES=[{value:\"caregiver\",label:\"Caregiver\"},{value:\"teacher\",label:\"Teacher\"},{value:\"cook\",label:\"Cook\"}];const roleBadge=staffRole=>{const v=String(staffRole||\"\").toLowerCase();if(v===\"teacher\")return\"bg-indigo-50 text-indigo-700 border-indigo-200\";if(v===\"cook\")return\"bg-amber-50 text-amber-700 border-amber-200\";return\"bg-emerald-50 text-emerald-700 border-emerald-200\";// caregiver default\n};const fmtDate=d=>d?new Date(d).toLocaleDateString():\"-\";export default function AdminDashboard(){const{user,logout}=React.useContext(AuthContext);// Staff state\nconst[staffList,setStaffList]=useState([]);const[loading,setLoading]=useState(true);const[creating,setCreating]=useState(false);const[status,setStatus]=useState(null);// {type, msg}\nconst[query,setQuery]=useState(\"\");const[roleFilter,setRoleFilter]=useState(\"all\");const[form,setForm]=useState({name:\"\",email:\"\",phone:\"\",staffRole:\"caregiver\",experience:\"\",joiningDate:\"\"});// Children state\nconst[children,setChildren]=useState([]);const[childrenLoading,setChildrenLoading]=useState(true);const[assigningId,setAssigningId]=useState(null);// childId while assigning\n// Staff Activities state\nconst[staffActivities,setStaffActivities]=useState([]);const[activitiesLoading,setActivitiesLoading]=useState(true);// Fetch staff activities\nconst fetchStaffActivities=async()=>{setActivitiesLoading(true);try{const res=await API.get(\"/admin/staff-record\");// Sort by latest first\nconst sorted=(res.data.data||[]).sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt));setStaffActivities(sorted);}catch(err){console.error(\"Failed to fetch staff activities:\",err);setStatus({type:\"error\",msg:\"Failed to load staff activity records.\"});setStaffActivities([]);}finally{setActivitiesLoading(false);}};// Fetch on mount (add to existing useEffect)\n// Fetch staff\nconst fetchStaff=async()=>{setLoading(true);setStatus(null);try{var _res$data;const res=await API.get(\"/users/staff\");setStaffList(((_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.data)||[]);}catch(e){console.error(e);setStatus({type:\"error\",msg:\"Failed to load staff list.\"});}finally{setLoading(false);}};// Fetch children\nconst fetchChildren=async()=>{setChildrenLoading(true);try{const res=await API.get(\"/admin/getallchildren\");setChildren(res.data||[]);}catch(err){console.error(err);setStatus({type:\"error\",msg:\"Failed to load children.\"});}finally{setChildrenLoading(false);}};useEffect(()=>{fetchStaff();fetchChildren();fetchStaffActivities();},[]);// Staff stats\nconst stats=useMemo(()=>{const total=staffList.length;const caregiver=staffList.filter(s=>s.staffRole===\"caregiver\").length;const teacher=staffList.filter(s=>s.staffRole===\"teacher\").length;const cook=staffList.filter(s=>s.staffRole===\"cook\").length;return{total,caregiver,teacher,cook};},[staffList]);// Filtered staff\nconst filtered=useMemo(()=>{const q=query.trim().toLowerCase();return staffList.filter(s=>{if(roleFilter!==\"all\"&&s.staffRole!==roleFilter)return false;if(!q)return true;const hay=\"\".concat(s.name||\"\",\" \").concat(s.email||\"\",\" \").concat(s.phone||\"\").toLowerCase();return hay.includes(q);}).slice().sort((a,b)=>new Date(b.createdAt||0)-new Date(a.createdAt||0));},[staffList,query,roleFilter]);// List of all staff members (for dropdown) - allow any staff to be assigned\nconst caregivers=useMemo(()=>{return staffList.filter(s=>s.role===\"staff\").sort((a,b)=>a.name.localeCompare(b.name));},[staffList]);// Create staff\nconst handleCreateStaff=async e=>{e.preventDefault();setStatus(null);setCreating(true);try{var _res$data2,_res$data3;const payload={name:form.name.trim(),email:form.email.trim(),phone:form.phone.trim(),staffRole:form.staffRole,experience:form.experience===\"\"?undefined:Number(form.experience),joiningDate:form.joiningDate||undefined};const res=await API.post(\"/users/staff\",payload);const created=(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.data;const tempPassword=(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.tempPassword;setStaffList(prev=>[created,...prev].filter(Boolean));setForm({name:\"\",email:\"\",phone:\"\",staffRole:\"caregiver\",experience:\"\",joiningDate:\"\"});setStatus({type:\"success\",msg:tempPassword?\"Staff created. Temporary password: \".concat(tempPassword):\"Staff created successfully.\"});}catch(err){var _err$response,_err$response$data;console.error(err);setStatus({type:\"error\",msg:((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||\"Failed to create staff.\"});}finally{setCreating(false);}};// Delete staff\nconst deleteStaff=async id=>{if(!window.confirm(\"Remove this staff member?\"))return;try{await API.delete(\"/users/\".concat(id));setStaffList(prev=>prev.filter(s=>s._id!==id));setStatus({type:\"success\",msg:\"Staff deleted.\"});}catch(err){console.error(err);setStatus({type:\"error\",msg:\"Failed to delete staff.\"});}};// Assign caregiver\nconst handleAssignCaregiver=async(childId,caregiverId)=>{// Allow empty string to unassign\nsetAssigningId(childId);try{await API.post(\"/admin/assign-caregiver\",{childId,caregiverId:caregiverId||null// backend should handle null/empty as unassign if needed\n});setChildren(prev=>prev.map(c=>c._id===childId?_objectSpread(_objectSpread({},c),{},{caregiver:caregiverId||null}):c));setStatus({type:\"success\",msg:\"Caregiver assigned successfully!\"});}catch(err){var _err$response2,_err$response2$data;console.error(err);setStatus({type:\"error\",msg:((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||\"Failed to assign caregiver.\"});}finally{setAssigningId(null);}};const handleUpdateCaregiver=async(childId,caregiverId)=>{setAssigningId(childId);try{const response=await API.put(\"/admin/assign-caregiver/\".concat(childId),{caregiverId:caregiverId||null});// Refresh children list to get updated data\nawait fetchChildren();setStatus({type:\"success\",msg:caregiverId?\"Staff member assigned successfully!\":\"Staff member removed successfully!\"});}catch(err){var _err$response3,_err$response3$data;console.error(err);setStatus({type:\"error\",msg:((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.error)||\"Failed to update assignment.\"});}finally{setAssigningId(null);}};// Helper to get caregiver name\nconst getCaregiverName=caregiverId=>{if(!caregiverId)return\"None\";const cg=staffList.find(s=>s._id===caregiverId);return cg?cg.name:\"Unknown\";};return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",style:{background:'linear-gradient(135deg, #f5cfcf 0%, #dbbfbf 100%)',minHeight:'100vh',padding:'0'},children:[/*#__PURE__*/_jsx(\"header\",{className:\"header\",style:{marginBottom:'0',borderRadius:'0',position:'sticky',top:0,zIndex:10},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',flexWrap:'wrap',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"gwendolyn-bold\",style:{fontSize:'2rem',marginBottom:'5px'},children:\"\\uD83C\\uDFE1 SmartDaycare - Admin Portal\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'1rem',marginBottom:'0'},children:\"Staff management \\u2022 children \\u2022 caregiver assignment\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'15px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'600',fontSize:'0.95rem'},children:(user===null||user===void 0?void 0:user.name)||\"Admin\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.85rem',opacity:0.8},children:user===null||user===void 0?void 0:user.email})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"nav-btn\",style:{background:'#ef4444'},children:\"Logout\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",style:{maxWidth:'1400px',margin:'0 auto',padding:'20px'},children:[(status===null||status===void 0?void 0:status.type)&&/*#__PURE__*/_jsx(\"div\",{className:\"form-container\",style:{marginBottom:'20px',background:status.type===\"success\"?'#d1fae5':'#fee2e2',border:\"2px solid \".concat(status.type===\"success\"?'#10b981':'#ef4444'),padding:'15px 20px'},children:/*#__PURE__*/_jsx(\"p\",{style:{color:status.type===\"success\"?'#065f46':'#991b1b',fontWeight:'600',margin:0},children:status.msg})}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-grid\",style:{marginBottom:'30px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-value\",children:stats.total}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-label\",children:\"Total Staff\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-value\",children:stats.caregiver}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-label\",children:\"Caregivers\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-value\",children:stats.teacher}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-label\",children:\"Teachers\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-value\",children:stats.cook}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-label\",children:\"Cooks\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(300px, 1fr))',gap:'30px',marginBottom:'30px'},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u2795 Add Staff\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:'20px',color:'#6b7280',fontSize:'0.9rem'},children:\"Create a staff account with a sub-role\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateStaff,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:form.name,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{name:e.target.value})),required:true,className:\"form-control\",placeholder:\"e.g., Ayesha Rahman\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:form.email,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{email:e.target.value})),required:true,className:\"form-control\",placeholder:\"e.g., staff@daycare.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(150px, 1fr))',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:form.phone,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{phone:e.target.value})),className:\"form-control\",placeholder:\"017XXXXXXXX\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Staff Role\"}),/*#__PURE__*/_jsx(\"select\",{value:form.staffRole,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{staffRole:e.target.value})),className:\"form-control\",children:STAFF_ROLES.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r.value,children:r.label},r.value))})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(150px, 1fr))',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Experience (years)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:form.experience,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{experience:e.target.value})),className:\"form-control\",placeholder:\"e.g., 3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Joining Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:form.joiningDate,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{joiningDate:e.target.value})),className:\"form-control\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:creating,className:\"btn btn-primary\",children:creating?\"Creating...\":\"Create Staff\"})}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.85rem',color:'#6b7280',marginTop:'10px',textAlign:'center'},children:\"A temporary password will be generated and shown after creation.\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{style:{gridColumn:'span 2'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px',flexWrap:'wrap',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDC65 Staff Directory\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:'0',color:'#6b7280',fontSize:'0.9rem'},children:\"Search, filter, and manage staff accounts\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',flexWrap:'wrap',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{style:{position:'absolute',left:'12px',top:'50%',transform:'translateY(-50%)',width:'20px',height:'20px',color:'#9ca3af'}}),/*#__PURE__*/_jsx(\"input\",{value:query,onChange:e=>setQuery(e.target.value),placeholder:\"Search name, email, phone\",className:\"form-control\",style:{paddingLeft:'40px',width:'250px',maxWidth:'100%'}})]}),/*#__PURE__*/_jsxs(\"select\",{value:roleFilter,onChange:e=>setRoleFilter(e.target.value),className:\"form-control\",style:{width:'150px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All roles\"}),STAFF_ROLES.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r.value,children:r.label},r.value))]}),/*#__PURE__*/_jsxs(\"button\",{onClick:fetchStaff,className:\"btn btn-secondary\",title:\"Refresh\",children:[/*#__PURE__*/_jsx(ArrowPathIcon,{style:{width:'18px',height:'18px',display:'inline-block',marginRight:'5px'}}),\"Refresh\"]})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"py-10 text-center text-slate-500\",children:\"Loading staff\\u2026\"}):filtered.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"py-10 text-center text-slate-500\",children:\"No staff found.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left bg-slate-50 border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3.5 px-4 font-semibold text-slate-700\",children:\"Staff\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3.5 px-4 font-semibold text-slate-700\",children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3.5 px-4 font-semibold text-slate-700\",children:\"Contact\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3.5 px-4 font-semibold text-slate-700\",children:\"Experience\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3.5 px-4 font-semibold text-slate-700\",children:\"Joining\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3.5 px-4 font-semibold text-slate-700\",children:\"Added\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3.5 px-4 font-semibold text-slate-700\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filtered.map(s=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b last:border-b-0 hover:bg-slate-50/60\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"py-3.5 px-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-slate-900\",children:s.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-500\",children:s.email})]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3.5 px-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold \".concat(roleBadge(s.staffRole)),children:String(s.staffRole).toUpperCase()})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3.5 px-4 text-slate-700\",children:s.phone||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3.5 px-4 text-slate-700\",children:s.experience!==undefined?\"\".concat(s.experience,\" yrs\"):\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3.5 px-4 text-slate-700\",children:fmtDate(s.joiningDate)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3.5 px-4 text-slate-700\",children:fmtDate(s.createdAt)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3.5 px-4\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>deleteStaff(s._id),className:\"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-rose-600 text-white hover:bg-rose-700 transition text-sm\",children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"}),\"Delete\"]})})]},s._id))})]})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-2xl border bg-white shadow-sm overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-5 border-b flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-xl bg-emerald-50 border border-emerald-100\",children:/*#__PURE__*/_jsx(UserPlusIcon,{className:\"h-5 w-5 text-emerald-700\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-semibold text-slate-900\",children:\"Children & Caregiver Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"Assign, update, or remove caregivers for each child\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:fetchChildren,className:\"inline-flex items-center gap-2 px-3 py-2.5 rounded-xl border hover:bg-slate-50 transition\",children:[/*#__PURE__*/_jsx(ArrowPathIcon,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Refresh\"})]})]}),childrenLoading?/*#__PURE__*/_jsx(\"div\",{style:{padding:'40px',textAlign:'center',color:'#6b7280'},children:\"Loading children\\u2026\"}):children.length===0?/*#__PURE__*/_jsx(\"div\",{style:{padding:'40px',textAlign:'center',color:'#6b7280'},children:\"No children registered yet.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left bg-slate-50 border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3.5 px-4 font-semibold text-slate-700\",children:\"Child\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3.5 px-4 font-semibold text-slate-700\",children:\"Date of Birth\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3.5 px-4 font-semibold text-slate-700\",children:\"Parent\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3.5 px-4 font-semibold text-slate-700\",children:\"Current Caregiver\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3.5 px-4 font-semibold text-slate-700\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:children.map(child=>{var _child$parent;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b last:border-b-0 hover:bg-slate-50/60\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"py-3.5 px-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-slate-900\",children:child.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-slate-500\",children:[\"ID: \",child._id]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3.5 px-4 text-slate-700\",children:child.dateOfBirth?new Date(child.dateOfBirth).toLocaleDateString():\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3.5 px-4 text-slate-700\",children:((_child$parent=child.parent)===null||_child$parent===void 0?void 0:_child$parent.name)||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3.5 px-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold \".concat(child.caregiver?\"bg-emerald-50 text-emerald-700 border-emerald-200\":\"bg-gray-100 text-gray-600 border-gray-300\"),children:getCaregiverName(child.caregiver)})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3.5 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"select\",{value:child.caregiver||\"\",disabled:assigningId===child._id,onChange:e=>{const newCaregiverId=e.target.value||null;handleUpdateCaregiver(child._id,newCaregiverId);},className:\"rounded-xl border px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u2014 No caregiver \\u2014\"}),caregivers.map(cg=>/*#__PURE__*/_jsxs(\"option\",{value:cg._id,children:[cg.name,\" (\",cg.email,\")\"]},cg._id))]}),child.caregiver&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleUpdateCaregiver(child._id,null),disabled:assigningId===child._id,className:\"px-3 py-2 rounded-xl bg-rose-600 text-white text-sm hover:bg-rose-700 disabled:opacity-60 transition flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"}),\"Remove\"]}),assigningId===child._id&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate-500\",children:\"saving\\u2026\"})]})})]},child._id);})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px',flexWrap:'wrap',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCCB Staff Activity Log\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:'0',color:'#6b7280',fontSize:'0.9rem'},children:\"All recorded activities from caregivers, teachers, and cooks\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:fetchStaffActivities,disabled:activitiesLoading,className:\"btn btn-secondary\",children:[/*#__PURE__*/_jsx(ArrowPathIcon,{style:{width:'18px',height:'18px',display:'inline-block',marginRight:'5px',animation:activitiesLoading?'spin 1s linear infinite':'none'}}),\"Refresh\"]})]}),activitiesLoading?/*#__PURE__*/_jsx(\"div\",{style:{padding:'40px',textAlign:'center',color:'#6b7280'},children:\"Loading activities\\u2026\"}):staffActivities.length===0?/*#__PURE__*/_jsx(\"div\",{style:{padding:'40px',textAlign:'center',color:'#6b7280'},children:\"No staff activities recorded yet.\"}):/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:'rgba(255, 255, 255, 0.5)',borderBottom:'2px solid rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',textAlign:'left',fontWeight:'600',color:'#2d3748'},children:\"Staff Member\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',textAlign:'left',fontWeight:'600',color:'#2d3748'},children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',textAlign:'left',fontWeight:'600',color:'#2d3748'},children:\"Activity\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',textAlign:'left',fontWeight:'600',color:'#2d3748'},children:\"Timestamp\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:staffActivities.map(activity=>{var _staff$staffRole;const staff=staffList.find(s=>s._id===activity.staffId);return/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'1px solid rgba(0, 0, 0, 0.1)'},onMouseEnter:e=>e.currentTarget.style.background='rgba(255, 255, 255, 0.3)',onMouseLeave:e=>e.currentTarget.style.background='transparent',children:[/*#__PURE__*/_jsxs(\"td\",{style:{padding:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'600',color:'#2d3748'},children:(staff===null||staff===void 0?void 0:staff.name)||\"Unknown Staff\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.85rem',color:'#6b7280'},children:(staff===null||staff===void 0?void 0:staff.email)||\"-\"})]}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'12px'},children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold \".concat(roleBadge(staff===null||staff===void 0?void 0:staff.staffRole)),children:(staff===null||staff===void 0?void 0:(_staff$staffRole=staff.staffRole)===null||_staff$staffRole===void 0?void 0:_staff$staffRole.toUpperCase())||\"N/A\"})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'12px',color:'#4a5568',fontWeight:'500'},children:activity.activityname}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'12px',color:'#4a5568'},children:new Date(activity.createdAt).toLocaleString()})]},activity._id);})})]})})]})]})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","ArrowPathIcon","MagnifyingGlassIcon","UserPlusIcon","TrashIcon","API","AuthContext","jsx","_jsx","jsxs","_jsxs","STAFF_ROLES","value","label","roleBadge","staffRole","v","String","toLowerCase","fmtDate","d","Date","toLocaleDateString","AdminDashboard","user","logout","useContext","staffList","setStaffList","loading","setLoading","creating","setCreating","status","setStatus","query","setQuery","roleFilter","setRoleFilter","form","setForm","name","email","phone","experience","joiningDate","children","setChildren","childrenLoading","setChildrenLoading","assigningId","setAssigningId","staffActivities","setStaffActivities","activitiesLoading","setActivitiesLoading","fetchStaffActivities","res","get","sorted","data","sort","a","b","createdAt","err","console","error","type","msg","fetchStaff","_res$data","e","fetchChildren","stats","total","length","caregiver","filter","s","teacher","cook","filtered","q","trim","hay","concat","includes","slice","caregivers","role","localeCompare","handleCreateStaff","preventDefault","_res$data2","_res$data3","payload","undefined","Number","post","created","tempPassword","prev","Boolean","_err$response","_err$response$data","response","deleteStaff","id","window","confirm","delete","_id","handleAssignCaregiver","childId","caregiverId","map","c","_objectSpread","_err$response2","_err$response2$data","handleUpdateCaregiver","put","_err$response3","_err$response3$data","getCaregiverName","cg","find","className","style","background","minHeight","padding","marginBottom","borderRadius","position","top","zIndex","display","justifyContent","alignItems","flexWrap","gap","fontSize","textAlign","fontWeight","opacity","onClick","maxWidth","margin","border","color","gridTemplateColumns","onSubmit","onChange","target","required","placeholder","r","min","disabled","marginTop","gridColumn","left","transform","width","height","paddingLeft","title","marginRight","toUpperCase","child","_child$parent","dateOfBirth","parent","newCaregiverId","animation","overflowX","borderCollapse","borderBottom","activity","_staff$staffRole","staff","staffId","onMouseEnter","currentTarget","onMouseLeave","activityname","toLocaleString"],"sources":["/media/dh77b/New Volume/smartdaycare/merged-project/frontend/src/pages/AdminDashboard.js"],"sourcesContent":["// import React, { useEffect, useMemo, useState } from \"react\";\n// import {\n//   ArrowPathIcon,\n//   MagnifyingGlassIcon,\n//   UserPlusIcon,\n//   TrashIcon,\n// } from \"@heroicons/react/24/outline\";\n\n// import API from \"../utils/api\";\n// import { AuthContext } from \"../context/AuthContext\";\n\n// const STAFF_ROLES = [\n//   { value: \"caregiver\", label: \"Caregiver\" },\n//   { value: \"teacher\", label: \"Teacher\" },\n//   { value: \"cook\", label: \"Cook\" },\n// ];\n\n// const roleBadge = (staffRole) => {\n//   const v = String(staffRole || \"\").toLowerCase();\n//   if (v === \"teacher\") return \"bg-indigo-50 text-indigo-700 border-indigo-200\";\n//   if (v === \"cook\") return \"bg-amber-50 text-amber-700 border-amber-200\";\n//   return \"bg-emerald-50 text-emerald-700 border-emerald-200\"; // caregiver default\n// };\n\n// const fmtDate = (d) => (d ? new Date(d).toLocaleDateString() : \"-\");\n\n// export default function AdminDashboard() {\n//   const { user, logout } = React.useContext(AuthContext);\n\n//   const [staffList, setStaffList] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [creating, setCreating] = useState(false);\n//   const [status, setStatus] = useState(null); // {type, msg}\n\n//   const [query, setQuery] = useState(\"\");\n//   const [roleFilter, setRoleFilter] = useState(\"all\");\n\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     email: \"\",\n//     phone: \"\",\n//     staffRole: \"\",\n//     experience: \"\",\n//     joiningDate: \"\",\n//   });\n\n//   const fetchStaff = async () => {\n//     setLoading(true);\n//     setStatus(null);\n//     try {\n//       const res = await API.get(\"/users/staff\");\n//       setStaffList(res.data?.data || []);\n//       console.log(res.data);\n//     } catch (e) {\n//       console.error(e);\n//       setStatus({ type: \"error\", msg: \"Failed to load staff list.\" });\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   useEffect(() => {\n//     fetchStaff();\n//   }, []);\n\n//   const stats = useMemo(() => {\n//     const total = staffList.length;\n//     const caregiver = staffList.filter(\n//       (s) => s.staffRole === \"caregiver\"\n//     ).length;\n//     const teacher = staffList.filter((s) => s.staffRole === \"teacher\").length;\n//     const cook = staffList.filter((s) => s.staffRole === \"cook\").length;\n//     return { total, caregiver, teacher, cook };\n//   }, [staffList]);\n\n//   const filtered = useMemo(() => {\n//     const q = query.trim().toLowerCase();\n//     return staffList\n//       .filter((s) => {\n//         if (roleFilter !== \"all\" && s.staffRole !== roleFilter) return false;\n//         if (!q) return true;\n//         const hay = `${s.name || \"\"} ${s.email || \"\"} ${\n//           s.phone || \"\"\n//         }`.toLowerCase();\n//         return hay.includes(q);\n//       })\n//       .slice()\n//       .sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\n//   }, [staffList, query, roleFilter]);\n\n//   const handleCreateStaff = async (e) => {\n//     e.preventDefault();\n//     setStatus(null);\n//     setCreating(true);\n\n//     try {\n//       const payload = {\n//         name: form.name.trim(),\n//         email: form.email.trim(),\n//         phone: form.phone.trim(),\n//         staffRole: form.staffRole,\n//         experience:\n//           form.experience === \"\" ? undefined : Number(form.experience),\n//         joiningDate: form.joiningDate || undefined,\n//       };\n//       console.log(payload);\n\n//       const res = await API.post(\"/users/staff\", payload);\n//       const created = res.data?.data;\n//       const tempPassword = res.data?.tempPassword;\n\n//       setStaffList((prev) => [created, ...prev].filter(Boolean));\n//       setForm({\n//         name: \"\",\n//         email: \"\",\n//         phone: \"\",\n//         staffRole: \"caregiver\",\n//         experience: \"\",\n//         joiningDate: \"\",\n//       });\n\n//       setStatus({\n//         type: \"success\",\n//         msg: tempPassword\n//           ? `Staff created. Temporary password: ${tempPassword} (share this with staff to log in).`\n//           : \"Staff created successfully.\",\n//       });\n//     } catch (err) {\n//       console.error(err);\n//       setStatus({\n//         type: \"error\",\n//         msg: err.response?.data?.error || \"Failed to create staff.\",\n//       });\n//     } finally {\n//       setCreating(false);\n//     }\n//   };\n\n//   const deleteStaff = async (id) => {\n//     if (!window.confirm(\"Remove this staff member?\")) return;\n//     try {\n//       await API.delete(`/users/${id}`);\n//       setStaffList((prev) => prev.filter((s) => s._id !== id));\n//     } catch (err) {\n//       console.error(err);\n//       setStatus({ type: \"error\", msg: \"Failed to delete staff.\" });\n//     }\n//   };\n\n//   // Handle Admin Request for User\n//   const handleAdminRequest = async (id) => {\n//     try {\n//       const res = await API.post(`/users/request-admin/${id}`);\n//       alert(res.data?.message || \"Admin request submitted successfully.\");\n//     } catch (err) {\n//       alert(\"Failed to submit admin request.\");\n//     }\n//   };\n\n//   return (\n//     <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50\">\n//       {/* Top bar */}\n//       <div className=\"sticky top-0 z-10 border-b bg-white/80 backdrop-blur\">\n//         <div className=\"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between\">\n//           <div>\n//             <h1 className=\"text-2xl font-bold text-slate-900\">Admin Portal</h1>\n//             <p className=\"text-sm text-slate-600\">\n//               Staff management • roles • onboarding\n//             </p>\n//           </div>\n\n//           <div className=\"flex items-center gap-3\">\n//             <div className=\"hidden sm:block text-right\">\n//               <div className=\"text-sm font-semibold text-slate-900\">\n//                 {user?.name || \"Admin\"}\n//               </div>\n//               <div className=\"text-xs text-slate-500\">{user?.email}</div>\n//             </div>\n//             <button\n//               onClick={logout}\n//               className=\"px-4 py-2 rounded-xl bg-slate-900 text-white hover:bg-slate-800 transition\"\n//             >\n//               Logout\n//             </button>\n//           </div>\n//         </div>\n//       </div>\n\n//       <div className=\"max-w-7xl mx-auto px-4 py-8\">\n//         {/* Status */}\n//         {status?.type && (\n//           <div\n//             className={`mb-6 rounded-2xl border px-4 py-3 text-sm shadow-sm ${\n//               status.type === \"success\"\n//                 ? \"bg-emerald-50 text-emerald-800 border-emerald-200\"\n//                 : \"bg-rose-50 text-rose-800 border-rose-200\"\n//             }`}\n//           >\n//             {status.msg}\n//           </div>\n//         )}\n\n//         {/* Stats */}\n//         <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Total Staff</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.total}\n//             </div>\n//           </div>\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Caregivers</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.caregiver}\n//             </div>\n//           </div>\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Teachers</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.teacher}\n//             </div>\n//           </div>\n//           <div className=\"rounded-2xl border bg-white p-5 shadow-sm\">\n//             <div className=\"text-xs text-slate-500\">Cooks</div>\n//             <div className=\"mt-2 text-3xl font-bold text-slate-900\">\n//               {stats.cook}\n//             </div>\n//           </div>\n//         </div>\n\n//         <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n//           {/* Create staff */}\n//           <div className=\"lg:col-span-1\">\n//             <div className=\"rounded-2xl border bg-white shadow-sm overflow-hidden\">\n//               <div className=\"px-6 py-5 border-b flex items-center gap-3\">\n//                 <div className=\"p-2 rounded-xl bg-indigo-50 border border-indigo-100\">\n//                   <UserPlusIcon className=\"h-5 w-5 text-indigo-700\" />\n//                 </div>\n//                 <div>\n//                   <h2 className=\"font-semibold text-slate-900\">Add Staff</h2>\n//                   <p className=\"text-xs text-slate-500\">\n//                     Create a staff account with a sub-role\n//                   </p>\n//                 </div>\n//               </div>\n\n//               <form onSubmit={handleCreateStaff} className=\"p-6 space-y-4\">\n//                 <div>\n//                   <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                     Full Name\n//                   </label>\n//                   <input\n//                     value={form.name}\n//                     onChange={(e) => setForm({ ...form, name: e.target.value })}\n//                     required\n//                     className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     placeholder=\"e.g., Ayesha Rahman\"\n//                   />\n//                 </div>\n\n//                 <div>\n//                   <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                     Email\n//                   </label>\n//                   <input\n//                     type=\"email\"\n//                     value={form.email}\n//                     onChange={(e) =>\n//                       setForm({ ...form, email: e.target.value })\n//                     }\n//                     required\n//                     className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     placeholder=\"e.g., staff@daycare.com\"\n//                   />\n//                 </div>\n\n//                 <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Phone\n//                     </label>\n//                     <input\n//                       value={form.phone}\n//                       onChange={(e) =>\n//                         setForm({ ...form, phone: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                       placeholder=\"017XXXXXXXX\"\n//                     />\n//                   </div>\n\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Staff Role\n//                     </label>\n//                     <select\n//                       value={form.staffRole}\n//                       onChange={(e) =>\n//                         setForm({ ...form, staffRole: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     >\n//                       {STAFF_ROLES.map((r) => (\n//                         <option key={r.value} value={r.value}>\n//                           {r.label}\n//                         </option>\n//                       ))}\n//                     </select>\n//                   </div>\n//                 </div>\n\n//                 <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Experience (years)\n//                     </label>\n//                     <input\n//                       type=\"number\"\n//                       min=\"0\"\n//                       value={form.experience}\n//                       onChange={(e) =>\n//                         setForm({ ...form, experience: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                       placeholder=\"e.g., 3\"\n//                     />\n//                   </div>\n\n//                   <div>\n//                     <label className=\"block text-xs font-semibold text-slate-700 mb-1\">\n//                       Joining Date\n//                     </label>\n//                     <input\n//                       type=\"date\"\n//                       value={form.joiningDate}\n//                       onChange={(e) =>\n//                         setForm({ ...form, joiningDate: e.target.value })\n//                       }\n//                       className=\"w-full rounded-xl border px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     />\n//                   </div>\n//                 </div>\n\n//                 <button\n//                   type=\"submit\"\n//                   disabled={creating}\n//                   className=\"w-full rounded-xl bg-indigo-600 text-white py-2.5 font-semibold hover:bg-indigo-700 disabled:opacity-60 transition\"\n//                 >\n//                   {creating ? \"Creating...\" : \"Create Staff\"}\n//                 </button>\n\n//                 <p className=\"text-xs text-slate-500\">\n//                   Tip: a temporary password is generated automatically. Share it\n//                   with the staff member so they can log in.\n//                 </p>\n//               </form>\n//             </div>\n//           </div>\n\n//           {/* Staff table */}\n//           <div className=\"lg:col-span-2\">\n//             <div className=\"rounded-2xl border bg-white shadow-sm overflow-hidden\">\n//               <div className=\"px-6 py-5 border-b flex flex-col sm:flex-row sm:items-center gap-4 sm:justify-between\">\n//                 <div>\n//                   <h2 className=\"font-semibold text-slate-900\">\n//                     Staff Directory\n//                   </h2>\n//                   <p className=\"text-xs text-slate-500\">\n//                     Search, filter, and manage staff accounts\n//                   </p>\n//                 </div>\n\n//                 <div className=\"flex items-center gap-3\">\n//                   <div className=\"relative\">\n//                     <MagnifyingGlassIcon className=\"h-5 w-5 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2\" />\n//                     <input\n//                       value={query}\n//                       onChange={(e) => setQuery(e.target.value)}\n//                       placeholder=\"Search name, email, phone\"\n//                       className=\"pl-10 pr-3 py-2.5 rounded-xl border w-72 max-w-full focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                     />\n//                   </div>\n\n//                   <select\n//                     value={roleFilter}\n//                     onChange={(e) => setRoleFilter(e.target.value)}\n//                     className=\"py-2.5 rounded-xl border bg-white px-3 focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n//                   >\n//                     <option value=\"all\">All roles</option>\n//                     {STAFF_ROLES.map((r) => (\n//                       <option key={r.value} value={r.value}>\n//                         {r.label}\n//                       </option>\n//                     ))}\n//                   </select>\n\n//                   <button\n//                     onClick={fetchStaff}\n//                     className=\"inline-flex items-center gap-2 px-3 py-2.5 rounded-xl border hover:bg-slate-50 transition\"\n//                     title=\"Refresh\"\n//                   >\n//                     <ArrowPathIcon className=\"h-5 w-5\" />\n//                     <span className=\"hidden sm:inline\">Refresh</span>\n//                   </button>\n//                 </div>\n//               </div>\n\n//               {loading ? (\n//                 <div className=\"py-10 text-center text-slate-500\">\n//                   Loading staff…\n//                 </div>\n//               ) : filtered.length === 0 ? (\n//                 <div className=\"py-10 text-center text-slate-500\">\n//                   No staff found. Try changing your search/filter.\n//                 </div>\n//               ) : (\n//                 <div className=\"overflow-x-auto\">\n//                   <table className=\"min-w-full text-sm\">\n//                     <thead>\n//                       <tr className=\"text-left bg-slate-50 border-b\">\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Staff\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Role\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Contact\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Experience\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Joining\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Added\n//                         </th>\n//                         <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n//                           Actions\n//                         </th>\n//                       </tr>\n//                     </thead>\n\n//                     <tbody>\n//                       {filtered.map((s) => (\n//                         <tr\n//                           key={s._id}\n//                           className=\"border-b last:border-b-0 hover:bg-slate-50/60\"\n//                         >\n//                           <td className=\"py-3.5 px-4\">\n//                             <div className=\"font-semibold text-slate-900\">\n//                               {s.name}\n//                             </div>\n//                             <div className=\"text-xs text-slate-500\">\n//                               {s.email}\n//                             </div>\n//                           </td>\n//                           <td className=\"py-3.5 px-4\">\n//                             <span\n//                               className={`inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold ${roleBadge(\n//                                 s.staffRole\n//                               )}`}\n//                             >\n//                               {String(s.staffRole).toUpperCase()}\n//                             </span>\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {s.phone || \"-\"}\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {s.experience === 0 || s.experience\n//                               ? `${s.experience} yrs`\n//                               : \"-\"}\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {fmtDate(s.joiningDate)}\n//                           </td>\n//                           <td className=\"py-3.5 px-4 text-slate-700\">\n//                             {fmtDate(s.createdAt)}\n//                           </td>\n//                           <td className=\"py-3.5 px-4\">\n//                             {s.role === \"parent\" && (\n//                               <button\n//                                 onClick={() => handleAdminRequest(s._id)}\n//                                 className=\"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition\"\n//                               >\n//                                 Request Admin\n//                               </button>\n//                             )}\n//                             <button\n//                               onClick={() => deleteStaff(s._id)}\n//                               className=\"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-rose-600 text-white hover:bg-rose-700 transition\"\n//                               title=\"Delete\"\n//                             >\n//                               <TrashIcon className=\"h-4 w-4\" />\n//                               Delete\n//                             </button>\n//                           </td>\n//                         </tr>\n//                       ))}\n//                     </tbody>\n//                   </table>\n//                 </div>\n//               )}\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport {\n  ArrowPathIcon,\n  MagnifyingGlassIcon,\n  UserPlusIcon,\n  TrashIcon,\n} from \"@heroicons/react/24/outline\";\nimport API from \"../utils/api\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport '../styles.css';\n\nconst STAFF_ROLES = [\n  { value: \"caregiver\", label: \"Caregiver\" },\n  { value: \"teacher\", label: \"Teacher\" },\n  { value: \"cook\", label: \"Cook\" },\n];\n\nconst roleBadge = (staffRole) => {\n  const v = String(staffRole || \"\").toLowerCase();\n  if (v === \"teacher\") return \"bg-indigo-50 text-indigo-700 border-indigo-200\";\n  if (v === \"cook\") return \"bg-amber-50 text-amber-700 border-amber-200\";\n  return \"bg-emerald-50 text-emerald-700 border-emerald-200\"; // caregiver default\n};\n\nconst fmtDate = (d) => (d ? new Date(d).toLocaleDateString() : \"-\");\n\nexport default function AdminDashboard() {\n  const { user, logout } = React.useContext(AuthContext);\n\n  // Staff state\n  const [staffList, setStaffList] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [creating, setCreating] = useState(false);\n  const [status, setStatus] = useState(null); // {type, msg}\n  const [query, setQuery] = useState(\"\");\n  const [roleFilter, setRoleFilter] = useState(\"all\");\n\n  const [form, setForm] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    staffRole: \"caregiver\",\n    experience: \"\",\n    joiningDate: \"\",\n  });\n\n  // Children state\n  const [children, setChildren] = useState([]);\n  const [childrenLoading, setChildrenLoading] = useState(true);\n  const [assigningId, setAssigningId] = useState(null); // childId while assigning\n\n  // Staff Activities state\n  const [staffActivities, setStaffActivities] = useState([]);\n  const [activitiesLoading, setActivitiesLoading] = useState(true);\n\n  // Fetch staff activities\n  const fetchStaffActivities = async () => {\n    setActivitiesLoading(true);\n    try {\n      const res = await API.get(\"/admin/staff-record\");\n      // Sort by latest first\n      const sorted = (res.data.data || []).sort(\n        (a, b) => new Date(b.createdAt) - new Date(a.createdAt)\n      );\n      setStaffActivities(sorted);\n    } catch (err) {\n      console.error(\"Failed to fetch staff activities:\", err);\n      setStatus({\n        type: \"error\",\n        msg: \"Failed to load staff activity records.\",\n      });\n      setStaffActivities([]);\n    } finally {\n      setActivitiesLoading(false);\n    }\n  };\n\n  // Fetch on mount (add to existing useEffect)\n\n  // Fetch staff\n  const fetchStaff = async () => {\n    setLoading(true);\n    setStatus(null);\n    try {\n      const res = await API.get(\"/users/staff\");\n      setStaffList(res.data?.data || []);\n    } catch (e) {\n      console.error(e);\n      setStatus({ type: \"error\", msg: \"Failed to load staff list.\" });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fetch children\n  const fetchChildren = async () => {\n    setChildrenLoading(true);\n    try {\n      const res = await API.get(\"/admin/getallchildren\");\n      setChildren(res.data || []);\n    } catch (err) {\n      console.error(err);\n      setStatus({ type: \"error\", msg: \"Failed to load children.\" });\n    } finally {\n      setChildrenLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchStaff();\n    fetchChildren();\n    fetchStaffActivities();\n  }, []);\n\n  // Staff stats\n  const stats = useMemo(() => {\n    const total = staffList.length;\n    const caregiver = staffList.filter(\n      (s) => s.staffRole === \"caregiver\"\n    ).length;\n    const teacher = staffList.filter((s) => s.staffRole === \"teacher\").length;\n    const cook = staffList.filter((s) => s.staffRole === \"cook\").length;\n    return { total, caregiver, teacher, cook };\n  }, [staffList]);\n\n  // Filtered staff\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    return staffList\n      .filter((s) => {\n        if (roleFilter !== \"all\" && s.staffRole !== roleFilter) return false;\n        if (!q) return true;\n        const hay = `${s.name || \"\"} ${s.email || \"\"} ${\n          s.phone || \"\"\n        }`.toLowerCase();\n        return hay.includes(q);\n      })\n      .slice()\n      .sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\n  }, [staffList, query, roleFilter]);\n\n  // List of all staff members (for dropdown) - allow any staff to be assigned\n  const caregivers = useMemo(() => {\n    return staffList\n      .filter((s) => s.role === \"staff\")\n      .sort((a, b) => a.name.localeCompare(b.name));\n  }, [staffList]);\n\n  // Create staff\n  const handleCreateStaff = async (e) => {\n    e.preventDefault();\n    setStatus(null);\n    setCreating(true);\n    try {\n      const payload = {\n        name: form.name.trim(),\n        email: form.email.trim(),\n        phone: form.phone.trim(),\n        staffRole: form.staffRole,\n        experience:\n          form.experience === \"\" ? undefined : Number(form.experience),\n        joiningDate: form.joiningDate || undefined,\n      };\n      const res = await API.post(\"/users/staff\", payload);\n      const created = res.data?.data;\n      const tempPassword = res.data?.tempPassword;\n\n      setStaffList((prev) => [created, ...prev].filter(Boolean));\n      setForm({\n        name: \"\",\n        email: \"\",\n        phone: \"\",\n        staffRole: \"caregiver\",\n        experience: \"\",\n        joiningDate: \"\",\n      });\n      setStatus({\n        type: \"success\",\n        msg: tempPassword\n          ? `Staff created. Temporary password: ${tempPassword}`\n          : \"Staff created successfully.\",\n      });\n    } catch (err) {\n      console.error(err);\n      setStatus({\n        type: \"error\",\n        msg: err.response?.data?.error || \"Failed to create staff.\",\n      });\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  // Delete staff\n  const deleteStaff = async (id) => {\n    if (!window.confirm(\"Remove this staff member?\")) return;\n    try {\n      await API.delete(`/users/${id}`);\n      setStaffList((prev) => prev.filter((s) => s._id !== id));\n      setStatus({ type: \"success\", msg: \"Staff deleted.\" });\n    } catch (err) {\n      console.error(err);\n      setStatus({ type: \"error\", msg: \"Failed to delete staff.\" });\n    }\n  };\n\n  // Assign caregiver\n  const handleAssignCaregiver = async (childId, caregiverId) => {\n    // Allow empty string to unassign\n    setAssigningId(childId);\n    try {\n      await API.post(\"/admin/assign-caregiver\", {\n        childId,\n        caregiverId: caregiverId || null, // backend should handle null/empty as unassign if needed\n      });\n\n      setChildren((prev) =>\n        prev.map((c) =>\n          c._id === childId ? { ...c, caregiver: caregiverId || null } : c\n        )\n      );\n\n      setStatus({\n        type: \"success\",\n        msg: \"Caregiver assigned successfully!\",\n      });\n    } catch (err) {\n      console.error(err);\n      setStatus({\n        type: \"error\",\n        msg: err.response?.data?.error || \"Failed to assign caregiver.\",\n      });\n    } finally {\n      setAssigningId(null);\n    }\n  };\n\n  const handleUpdateCaregiver = async (childId, caregiverId) => {\n    setAssigningId(childId);\n    try {\n      const response = await API.put(`/admin/assign-caregiver/${childId}`, {\n        caregiverId: caregiverId || null,\n      });\n\n      // Refresh children list to get updated data\n      await fetchChildren();\n\n      setStatus({\n        type: \"success\",\n        msg: caregiverId\n          ? \"Staff member assigned successfully!\"\n          : \"Staff member removed successfully!\",\n      });\n    } catch (err) {\n      console.error(err);\n      setStatus({\n        type: \"error\",\n        msg: err.response?.data?.error || \"Failed to update assignment.\",\n      });\n    } finally {\n      setAssigningId(null);\n    }\n  };\n\n  // Helper to get caregiver name\n  const getCaregiverName = (caregiverId) => {\n    if (!caregiverId) return \"None\";\n    const cg = staffList.find((s) => s._id === caregiverId);\n    return cg ? cg.name : \"Unknown\";\n  };\n\n  return (\n    <div className=\"app-container\" style={{ background: 'linear-gradient(135deg, #f5cfcf 0%, #dbbfbf 100%)', minHeight: '100vh', padding: '0' }}>\n      {/* Top bar - Header */}\n      <header className=\"header\" style={{ marginBottom: '0', borderRadius: '0', position: 'sticky', top: 0, zIndex: 10 }}>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', gap: '15px' }}>\n          <div>\n            <h1 className=\"gwendolyn-bold\" style={{ fontSize: '2rem', marginBottom: '5px' }}>🏡 SmartDaycare - Admin Portal</h1>\n            <p style={{ fontSize: '1rem', marginBottom: '0' }}>\n              Staff management • children • caregiver assignment\n            </p>\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '15px', flexWrap: 'wrap' }}>\n            <div style={{ textAlign: 'right' }}>\n              <div style={{ fontWeight: '600', fontSize: '0.95rem' }}>\n                {user?.name || \"Admin\"}\n              </div>\n              <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>{user?.email}</div>\n            </div>\n            <button\n              onClick={logout}\n              className=\"nav-btn\"\n              style={{ background: '#ef4444' }}\n            >\n              Logout\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"app-container\" style={{ maxWidth: '1400px', margin: '0 auto', padding: '20px' }}>\n        {/* Status Message */}\n        {status?.type && (\n          <div\n            className=\"form-container\"\n            style={{\n              marginBottom: '20px',\n              background: status.type === \"success\" ? '#d1fae5' : '#fee2e2',\n              border: `2px solid ${status.type === \"success\" ? '#10b981' : '#ef4444'}`,\n              padding: '15px 20px'\n            }}\n          >\n            <p style={{ \n              color: status.type === \"success\" ? '#065f46' : '#991b1b',\n              fontWeight: '600',\n              margin: 0\n            }}>\n              {status.msg}\n            </p>\n          </div>\n        )}\n\n        {/* Stats Cards */}\n        <div className=\"summary-grid\" style={{ marginBottom: '30px' }}>\n          <div className=\"summary-item\">\n            <div className=\"summary-value\">{stats.total}</div>\n            <div className=\"summary-label\">Total Staff</div>\n          </div>\n          <div className=\"summary-item\">\n            <div className=\"summary-value\">{stats.caregiver}</div>\n            <div className=\"summary-label\">Caregivers</div>\n          </div>\n          <div className=\"summary-item\">\n            <div className=\"summary-value\">{stats.teacher}</div>\n            <div className=\"summary-label\">Teachers</div>\n          </div>\n          <div className=\"summary-item\">\n            <div className=\"summary-value\">{stats.cook}</div>\n            <div className=\"summary-label\">Cooks</div>\n          </div>\n        </div>\n\n        {/* Staff Management Section */}\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '30px', marginBottom: '30px' }}>\n          {/* Add Staff Form */}\n          <div>\n            <div className=\"form-container\">\n              <h2>➕ Add Staff</h2>\n              <p style={{ marginBottom: '20px', color: '#6b7280', fontSize: '0.9rem' }}>\n                Create a staff account with a sub-role\n              </p>\n              <form onSubmit={handleCreateStaff}>\n                <div className=\"form-group\">\n                  <label>Full Name</label>\n                  <input\n                    type=\"text\"\n                    value={form.name}\n                    onChange={(e) => setForm({ ...form, name: e.target.value })}\n                    required\n                    className=\"form-control\"\n                    placeholder=\"e.g., Ayesha Rahman\"\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label>Email</label>\n                  <input\n                    type=\"email\"\n                    value={form.email}\n                    onChange={(e) =>\n                      setForm({ ...form, email: e.target.value })\n                    }\n                    required\n                    className=\"form-control\"\n                    placeholder=\"e.g., staff@daycare.com\"\n                  />\n                </div>\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '15px' }}>\n                  <div className=\"form-group\">\n                    <label>Phone</label>\n                    <input\n                      type=\"tel\"\n                      value={form.phone}\n                      onChange={(e) =>\n                        setForm({ ...form, phone: e.target.value })\n                      }\n                      className=\"form-control\"\n                      placeholder=\"017XXXXXXXX\"\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Staff Role</label>\n                    <select\n                      value={form.staffRole}\n                      onChange={(e) =>\n                        setForm({ ...form, staffRole: e.target.value })\n                      }\n                      className=\"form-control\"\n                    >\n                      {STAFF_ROLES.map((r) => (\n                        <option key={r.value} value={r.value}>\n                          {r.label}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '15px' }}>\n                  <div className=\"form-group\">\n                    <label>Experience (years)</label>\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      value={form.experience}\n                      onChange={(e) =>\n                        setForm({ ...form, experience: e.target.value })\n                      }\n                      className=\"form-control\"\n                      placeholder=\"e.g., 3\"\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Joining Date</label>\n                    <input\n                      type=\"date\"\n                      value={form.joiningDate}\n                      onChange={(e) =>\n                        setForm({ ...form, joiningDate: e.target.value })\n                      }\n                      className=\"form-control\"\n                    />\n                  </div>\n                </div>\n                <div className=\"form-actions\">\n                  <button\n                    type=\"submit\"\n                    disabled={creating}\n                    className=\"btn btn-primary\"\n                  >\n                    {creating ? \"Creating...\" : \"Create Staff\"}\n                  </button>\n                </div>\n                <p style={{ fontSize: '0.85rem', color: '#6b7280', marginTop: '10px', textAlign: 'center' }}>\n                  A temporary password will be generated and shown after creation.\n                </p>\n              </form>\n            </div>\n          </div>\n\n          {/* Staff Directory Table */}\n          <div style={{ gridColumn: 'span 2' }}>\n            <div className=\"form-container\">\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px', flexWrap: 'wrap', gap: '15px' }}>\n                <div>\n                  <h2>👥 Staff Directory</h2>\n                  <p style={{ marginBottom: '0', color: '#6b7280', fontSize: '0.9rem' }}>\n                    Search, filter, and manage staff accounts\n                  </p>\n                </div>\n                <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap', alignItems: 'center' }}>\n                  <div style={{ position: 'relative' }}>\n                    <MagnifyingGlassIcon style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)', width: '20px', height: '20px', color: '#9ca3af' }} />\n                    <input\n                      value={query}\n                      onChange={(e) => setQuery(e.target.value)}\n                      placeholder=\"Search name, email, phone\"\n                      className=\"form-control\"\n                      style={{ paddingLeft: '40px', width: '250px', maxWidth: '100%' }}\n                    />\n                  </div>\n                  <select\n                    value={roleFilter}\n                    onChange={(e) => setRoleFilter(e.target.value)}\n                    className=\"form-control\"\n                    style={{ width: '150px' }}\n                  >\n                    <option value=\"all\">All roles</option>\n                    {STAFF_ROLES.map((r) => (\n                      <option key={r.value} value={r.value}>\n                        {r.label}\n                      </option>\n                    ))}\n                  </select>\n                  <button\n                    onClick={fetchStaff}\n                    className=\"btn btn-secondary\"\n                    title=\"Refresh\"\n                  >\n                    <ArrowPathIcon style={{ width: '18px', height: '18px', display: 'inline-block', marginRight: '5px' }} />\n                    Refresh\n                  </button>\n                </div>\n              </div>\n\n              {loading ? (\n                <div className=\"py-10 text-center text-slate-500\">\n                  Loading staff…\n                </div>\n              ) : filtered.length === 0 ? (\n                <div className=\"py-10 text-center text-slate-500\">\n                  No staff found.\n                </div>\n              ) : (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"min-w-full text-sm\">\n                    <thead>\n                      <tr className=\"text-left bg-slate-50 border-b\">\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Staff\n                        </th>\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Role\n                        </th>\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Contact\n                        </th>\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Experience\n                        </th>\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Joining\n                        </th>\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Added\n                        </th>\n                        <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                          Actions\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {filtered.map((s) => (\n                        <tr\n                          key={s._id}\n                          className=\"border-b last:border-b-0 hover:bg-slate-50/60\"\n                        >\n                          <td className=\"py-3.5 px-4\">\n                            <div className=\"font-semibold text-slate-900\">\n                              {s.name}\n                            </div>\n                            <div className=\"text-xs text-slate-500\">\n                              {s.email}\n                            </div>\n                          </td>\n                          <td className=\"py-3.5 px-4\">\n                            <span\n                              className={`inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold ${roleBadge(\n                                s.staffRole\n                              )}`}\n                            >\n                              {String(s.staffRole).toUpperCase()}\n                            </span>\n                          </td>\n                          <td className=\"py-3.5 px-4 text-slate-700\">\n                            {s.phone || \"-\"}\n                          </td>\n                          <td className=\"py-3.5 px-4 text-slate-700\">\n                            {s.experience !== undefined\n                              ? `${s.experience} yrs`\n                              : \"-\"}\n                          </td>\n                          <td className=\"py-3.5 px-4 text-slate-700\">\n                            {fmtDate(s.joiningDate)}\n                          </td>\n                          <td className=\"py-3.5 px-4 text-slate-700\">\n                            {fmtDate(s.createdAt)}\n                          </td>\n                          <td className=\"py-3.5 px-4\">\n                            <button\n                              onClick={() => deleteStaff(s._id)}\n                              className=\"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-rose-600 text-white hover:bg-rose-700 transition text-sm\"\n                            >\n                              <TrashIcon className=\"h-4 w-4\" />\n                              Delete\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Children & Caregiver Assignment Section */}\n        {/* Children & Caregiver Assignment Section - Updated */}\n        <div className=\"rounded-2xl border bg-white shadow-sm overflow-hidden\">\n          <div className=\"px-6 py-5 border-b flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 rounded-xl bg-emerald-50 border border-emerald-100\">\n                <UserPlusIcon className=\"h-5 w-5 text-emerald-700\" />\n              </div>\n              <div>\n                <h2 className=\"font-semibold text-slate-900\">\n                  Children & Caregiver Management\n                </h2>\n                <p className=\"text-xs text-slate-500\">\n                  Assign, update, or remove caregivers for each child\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={fetchChildren}\n              className=\"inline-flex items-center gap-2 px-3 py-2.5 rounded-xl border hover:bg-slate-50 transition\"\n            >\n              <ArrowPathIcon className=\"h-5 w-5\" />\n              <span className=\"hidden sm:inline\">Refresh</span>\n            </button>\n          </div>\n\n          {childrenLoading ? (\n            <div style={{ padding: '40px', textAlign: 'center', color: '#6b7280' }}>\n              Loading children…\n            </div>\n          ) : children.length === 0 ? (\n            <div style={{ padding: '40px', textAlign: 'center', color: '#6b7280' }}>\n              No children registered yet.\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full text-sm\">\n                <thead>\n                  <tr className=\"text-left bg-slate-50 border-b\">\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Child\n                    </th>\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Date of Birth\n                    </th>\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Parent\n                    </th>\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Current Caregiver\n                    </th>\n                    <th className=\"py-3.5 px-4 font-semibold text-slate-700\">\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {children.map((child) => (\n                    <tr\n                      key={child._id}\n                      className=\"border-b last:border-b-0 hover:bg-slate-50/60\"\n                    >\n                      <td className=\"py-3.5 px-4\">\n                        <div className=\"font-semibold text-slate-900\">\n                          {child.name}\n                        </div>\n                        <div className=\"text-xs text-slate-500\">\n                          ID: {child._id}\n                        </div>\n                      </td>\n                      <td className=\"py-3.5 px-4 text-slate-700\">\n                        {child.dateOfBirth\n                          ? new Date(child.dateOfBirth).toLocaleDateString()\n                          : \"-\"}\n                      </td>\n                      <td className=\"py-3.5 px-4 text-slate-700\">\n                        {child.parent?.name || \"-\"}\n                      </td>\n                      <td className=\"py-3.5 px-4\">\n                        <span\n                          className={`inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold ${\n                            child.caregiver\n                              ? \"bg-emerald-50 text-emerald-700 border-emerald-200\"\n                              : \"bg-gray-100 text-gray-600 border-gray-300\"\n                          }`}\n                        >\n                          {getCaregiverName(child.caregiver)}\n                        </span>\n                      </td>\n                      <td className=\"py-3.5 px-4\">\n                        <div className=\"flex items-center gap-3\">\n                          {/* Assign / Update Caregiver Dropdown */}\n                          <select\n                            value={child.caregiver || \"\"}\n                            disabled={assigningId === child._id}\n                            onChange={(e) => {\n                              const newCaregiverId = e.target.value || null;\n                              handleUpdateCaregiver(child._id, newCaregiverId);\n                            }}\n                            className=\"rounded-xl border px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200\"\n                          >\n                            <option value=\"\">— No caregiver —</option>\n                            {caregivers.map((cg) => (\n                              <option key={cg._id} value={cg._id}>\n                                {cg.name} ({cg.email})\n                              </option>\n                            ))}\n                          </select>\n\n                          {/* Explicit Remove Button */}\n                          {child.caregiver && (\n                            <button\n                              onClick={() =>\n                                handleUpdateCaregiver(child._id, null)\n                              }\n                              disabled={assigningId === child._id}\n                              className=\"px-3 py-2 rounded-xl bg-rose-600 text-white text-sm hover:bg-rose-700 disabled:opacity-60 transition flex items-center gap-1.5\"\n                            >\n                              <TrashIcon className=\"h-4 w-4\" />\n                              Remove\n                            </button>\n                          )}\n\n                          {assigningId === child._id && (\n                            <span className=\"text-xs text-slate-500\">\n                              saving…\n                            </span>\n                          )}\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n\n        {/* ==================== STAFF ACTIVITY RECORDS SECTION ==================== */}\n        <div className=\"form-container\">\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px', flexWrap: 'wrap', gap: '15px' }}>\n            <div>\n              <h2>📋 Staff Activity Log</h2>\n              <p style={{ marginBottom: '0', color: '#6b7280', fontSize: '0.9rem' }}>\n                All recorded activities from caregivers, teachers, and cooks\n              </p>\n            </div>\n            <button\n              onClick={fetchStaffActivities}\n              disabled={activitiesLoading}\n              className=\"btn btn-secondary\"\n            >\n              <ArrowPathIcon style={{ width: '18px', height: '18px', display: 'inline-block', marginRight: '5px', animation: activitiesLoading ? 'spin 1s linear infinite' : 'none' }} />\n              Refresh\n            </button>\n          </div>\n\n          {activitiesLoading ? (\n            <div style={{ padding: '40px', textAlign: 'center', color: '#6b7280' }}>\n              Loading activities…\n            </div>\n          ) : staffActivities.length === 0 ? (\n            <div style={{ padding: '40px', textAlign: 'center', color: '#6b7280' }}>\n              No staff activities recorded yet.\n            </div>\n          ) : (\n            <div style={{ overflowX: 'auto' }}>\n              <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                <thead>\n                  <tr style={{ background: 'rgba(255, 255, 255, 0.5)', borderBottom: '2px solid rgba(0, 0, 0, 0.1)' }}>\n                    <th style={{ padding: '12px', textAlign: 'left', fontWeight: '600', color: '#2d3748' }}>Staff Member</th>\n                    <th style={{ padding: '12px', textAlign: 'left', fontWeight: '600', color: '#2d3748' }}>Role</th>\n                    <th style={{ padding: '12px', textAlign: 'left', fontWeight: '600', color: '#2d3748' }}>Activity</th>\n                    <th style={{ padding: '12px', textAlign: 'left', fontWeight: '600', color: '#2d3748' }}>Timestamp</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {staffActivities.map((activity) => {\n                    const staff = staffList.find(\n                      (s) => s._id === activity.staffId\n                    );\n                    return (\n                      <tr\n                        key={activity._id}\n                        style={{ borderBottom: '1px solid rgba(0, 0, 0, 0.1)' }}\n                        onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(255, 255, 255, 0.3)'}\n                        onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\n                      >\n                        <td style={{ padding: '12px' }}>\n                          <div style={{ fontWeight: '600', color: '#2d3748' }}>\n                            {staff?.name || \"Unknown Staff\"}\n                          </div>\n                          <div style={{ fontSize: '0.85rem', color: '#6b7280' }}>\n                            {staff?.email || \"-\"}\n                          </div>\n                        </td>\n                        <td style={{ padding: '12px' }}>\n                          <span\n                            className={`inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-semibold ${roleBadge(\n                              staff?.staffRole\n                            )}`}\n                          >\n                            {staff?.staffRole?.toUpperCase() || \"N/A\"}\n                          </span>\n                        </td>\n                        <td style={{ padding: '12px', color: '#4a5568', fontWeight: '500' }}>\n                          {activity.activityname}\n                        </td>\n                        <td style={{ padding: '12px', color: '#4a5568' }}>\n                          {new Date(activity.createdAt).toLocaleString()}\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"iJAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAO,CAAAA,KAAK,EAAIC,SA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}