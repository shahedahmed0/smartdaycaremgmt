{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{AuthProvider,AuthContext}from'./context/AuthContext';import Login from'./pages/Login';import Register from'./pages/Register';import ParentDashboard from'./pages/ParentDashboard';import StaffDashboard from'./pages/StaffDashboard';import AdminDashboard from'./pages/AdminDashboard';import NotificationsPage from'./pages/NotificationsPage';import ChatPage from'./pages/ChatPage';import BillingDashboard from'./pages/BillingDashboard';import'./App.css';import'./styles.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,allowedRoles}=_ref;const{user,loading}=React.useContext(AuthContext);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"})});if(!user)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});if(allowedRoles&&!allowedRoles.includes(user.role)){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}return children;};const HomeRedirect=()=>{const{user,loading}=React.useContext(AuthContext);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"})});if(!user)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});if(user.role==='admin')return/*#__PURE__*/_jsx(Navigate,{to:\"/admin\"});if(user.role==='staff')return/*#__PURE__*/_jsx(Navigate,{to:\"/staff\"});return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"});};function App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['parent'],children:/*#__PURE__*/_jsx(ParentDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/staff\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['staff'],children:/*#__PURE__*/_jsx(StaffDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['admin'],children:/*#__PURE__*/_jsx(AdminDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/notifications\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['parent','staff','admin'],children:/*#__PURE__*/_jsx(NotificationsPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/chat\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['parent','staff','admin'],children:/*#__PURE__*/_jsx(ChatPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/billing\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['admin'],children:/*#__PURE__*/_jsx(BillingDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/analytics\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['admin'],children:/*#__PURE__*/_jsx(BillingDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomeRedirect,{})})]})})});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","AuthProvider","AuthContext","Login","Register","ParentDashboard","StaffDashboard","AdminDashboard","NotificationsPage","ChatPage","BillingDashboard","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","allowedRoles","user","loading","useContext","className","to","includes","role","HomeRedirect","App","path","element"],"sources":["/media/dh77b/New Volume/smartdaycare/merged-project/frontend/src/App.js"],"sourcesContent":["import React from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { AuthProvider, AuthContext } from './context/AuthContext';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport ParentDashboard from './pages/ParentDashboard';\nimport StaffDashboard from './pages/StaffDashboard';\nimport AdminDashboard from './pages/AdminDashboard';\nimport NotificationsPage from './pages/NotificationsPage';\nimport ChatPage from './pages/ChatPage';\nimport BillingDashboard from './pages/BillingDashboard';\nimport './App.css';\nimport './styles.css';\n\nconst ProtectedRoute = ({ children, allowedRoles }) => {\n  const { user, loading } = React.useContext(AuthContext);\n\n  if (loading) return <div className=\"min-h-screen flex items-center justify-center\"><div>Loading...</div></div>;\n  if (!user) return <Navigate to=\"/login\" />;\n\n  if (allowedRoles && !allowedRoles.includes(user.role)) {\n    return <Navigate to=\"/login\" />;\n  }\n\n  return children;\n};\n\nconst HomeRedirect = () => {\n  const { user, loading } = React.useContext(AuthContext);\n\n  if (loading) return <div className=\"min-h-screen flex items-center justify-center\"><div>Loading...</div></div>;\n  if (!user) return <Navigate to=\"/login\" />;\n\n  if (user.role === 'admin') return <Navigate to=\"/admin\" />;\n  if (user.role === 'staff') return <Navigate to=\"/staff\" />;\n  return <Navigate to=\"/dashboard\" />;\n};\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <Router>\n        <Routes>\n          {/* Public Routes */}\n          <Route path=\"/login\" element={<Login />} />\n          <Route path=\"/register\" element={<Register />} />\n\n          {/* Protected Routes */}\n          <Route path=\"/dashboard\" element={\n            <ProtectedRoute allowedRoles={['parent']}>\n              <ParentDashboard />\n            </ProtectedRoute>\n          } />\n\n          <Route path=\"/staff\" element={\n            <ProtectedRoute allowedRoles={['staff']}>\n              <StaffDashboard />\n            </ProtectedRoute>\n          } />\n\n          <Route path=\"/admin\" element={\n            <ProtectedRoute allowedRoles={['admin']}>\n              <AdminDashboard />\n            </ProtectedRoute>\n          } />\n\n          {/* Additional Features */}\n          <Route path=\"/notifications\" element={\n            <ProtectedRoute allowedRoles={['parent', 'staff', 'admin']}>\n              <NotificationsPage />\n            </ProtectedRoute>\n          } />\n\n          <Route path=\"/chat\" element={\n            <ProtectedRoute allowedRoles={['parent', 'staff', 'admin']}>\n              <ChatPage />\n            </ProtectedRoute>\n          } />\n\n          <Route path=\"/billing\" element={\n            <ProtectedRoute allowedRoles={['admin']}>\n              <BillingDashboard />\n            </ProtectedRoute>\n          } />\n\n          <Route path=\"/analytics\" element={\n            <ProtectedRoute allowedRoles={['admin']}>\n              <BillingDashboard />\n            </ProtectedRoute>\n          } />\n\n          <Route path=\"/\" element={<HomeRedirect />} />\n        </Routes>\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}